e$hh_children <- pmin(e$hh_children, 10)
e$hh_adults <- pmin(e$hh_adults, 5)
# e$bad_quality[e$km_driven > 10^6] <- 1 + e$bad_quality[e$km_driven > 10^6] #
# e$bad_quality[e$flights >= 100] <- 1 + e$bad_quality[e$flights >= 100] #
# label(e$bad_quality) <- "bad_quality: Indicator of aberrant answers at hh_size, km_driven or flights."
# TODO relative_environmentalist
if (country=="US") yes_no_names <- c("","No","PNR","Yes")
if (country=="FR") yes_no_names <- c("","Non","PNR","Oui")
for (j in intersect(c("change_lifestyle", "pro_global_assembly", "pro_global_tax", "pro_tax_1p", "tax_transfers_trust", "investments_trust",
"standard_trust", "tax_transfers_effective", "investments_effective", "standard_effective", "tax_transfers_support", "investments_support",
"standard_support", "hit_by_covid", "member_environmental_orga", "relative_environmentalist"
), names(e))) {
e[j][[1]] <- as.item(as.character(e[j][[1]]),
labels = structure(yes_no_names, names = c("NA","No","PNR","Yes")),
missing.values = c("","PNR"), annotation=attr(e[j][[1]], "label"))
}
for (j in c(#"gender", "region", "speaks_well", "education", "employment_status", "income", "wealth", "frequency_beef", "survey_biased", "vote", "media", "country_should_act_condition
"heating", "transport_available", "trust_govt", "trust_public_spending", "inequality_problem", "CC_exists", "CC_dynamics", "CC_stoppable",
"CC_talks", "CC_worries", "interest_politics", "vote_participation"
# "standard_employment", "investments_employment", "tax_transfers_employment", "standard_side_effects", "investments_side_effects", "tax_transfers_side_effects",
# "standard_incidence_poor", "investments_incidence_poor", "tax_transfers_incidence_poor", "standard_incidence_rich", "investments_incidence_rich", "tax_transfers_incidence_rich",
# "standard_incidence_middle", "investments_incidence_middle", "tax_transfers_incidence_middle", "standard_incidence_urban", "investments_incidence_urban", "tax_transfers_incidence_urban",
# "standard_incidence_rural", "investments_incidence_rural", "tax_transfers_incidence_rural", "standard_incidence_self", "investments_incidence_self", "tax_transfers_incidence_self",
# "future_gdp", "envi", "equal_quota", "country_should_act", "insulation_compulsory", "flight_quota_1000km", "flight_quota_3000km", "flight_quota_one_trip", "ban_incentives"
)) {
e[j][[1]] <- as.item(as.factor(e[j][[1]]), missing.values = c("PNR", "", NA), annotation=paste(attr(e[j][[1]], "label"), "(char)"))
}
for (j in names(e)) {
if ((grepl('race_|home_|CC_factor_|CC_responsible_|CC_affected_|change_condition_|effect_policies_|kaya_|scale_|beef_|far_left|left|center$', j)
| grepl('right|far_right|liberal|conservative|humanist|patriot|apolitical|^environmentalist|feminist|political_identity_other_choice', j))
& !(grepl('_other$|order_', j))) {
temp <- label(e[[j]])
e[[j]] <- e[[j]]!="" # e[[j]][e[[j]]!=""] <- TRUE
e[[j]][is.na(e[[j]])] <- FALSE
label(e[[j]]) <- temp
}
}
variables_race <<- names(e)[grepl('race_', names(e))]
variables_home <<- names(e)[grepl('home_', names(e))]
variables_transport <<- names(e)[grepl('transport_', names(e))]
variables_CC_factor <<- names(e)[grepl('CC_factor_', names(e))]
variables_CC_responsible <<- names(e)[grepl('CC_responsible_', names(e)) & !grepl("order_", names(e))]
variables_CC_affected <<- names(e)[grepl('CC_affected_', names(e))]
variables_change_condition <<- names(e)[grepl('change_condition_', names(e))]
variables_effect_policies <<- names(e)[grepl('effect_policies_', names(e))]
variables_kaya <<- names(e)[grepl('kaya_', names(e))]
variables_scale <<- names(e)[grepl('scale_', names(e))]
variables_beef <<- names(e)[grepl('beef_', names(e)) & !grepl("order_", names(e))]
variables_burden_sharing <<- names(e)[grepl('burden_sharing_', names(e))]
variables_incidence <<- names(e)[grepl('incidence_', names(e))]
variables_standard_incidence <<- names(e)[grepl('standard_incidence_', names(e))]
variables_investments_incidence <<- names(e)[grepl('investments_incidence_', names(e))]
variables_tax_transfers_incidence <<- names(e)[grepl('tax_transfers_incidence_', names(e))]
variables_side_effects <<- names(e)[grepl('_side_effects', names(e))]
variables_employment <<- names(e)[grepl('_employment', names(e))]
variables_policy <<- names(e)[grepl('policy_', names(e)) & !grepl("order_", names(e))]
variables_tax <<- names(e)[grepl('^tax_', names(e)) & !grepl("order_|transfers_", names(e))]
variables_political_identity <<- c("liberal", "conservative", "humanist", "patriot", "apolitical", "environmentalist", "feminist", "political_identity_other")
text_strongly_agree <- c( "US" = "Strongly agree",  "US" = "I fully agree")
text_somewhat_agree <- c( "US" = "Somewhat agree",  "US" = "I somewhat agree")
text_neutral <- c( "US" = "Neither agree or disagree",  "US" = "I neither agree nor disagree")
text_somewhat_disagree <- c( "US" = "Somewhat disagree",  "US" = "I somewhat disagree")
text_strongly_disagree <- c("US" = "Strongly disagree", "US" = "Fully disagree")
#  variables_incidence variables_burden_sharing
text_support_absolutely <- c("US" = "Yes, absolutely", "US" = "Strongly support") # first: policy / second: tax
text_support_somewhat <- c("US" = "Yes, somewhat", "US" = "Rather support")
text_support_indifferent <- c("US" = "Indifferent")
text_support_not_really <- c("US" = "No, not really", "US" = "Rather oppose")
text_support_not_at_all <- c("US" = "No, not at all", "US" = "Strongly oppose")
text_rural <- c("US" = "A rural area")
text_small_town <- c("US" = "A small town (between 5,000 and 20,000 inhabitants)")
text_large_town <- c("US" = "A large town (between 20,000 and 50,000 inhabitants)")
text_small_city <- c("US" = "A small city (between 50,000 and 250,000 inhabitants)")
text_medium_city <- c("US" = " A medium-size city (between 250,000 and 3,000,000 inhabitants)")
text_large_city <- c("US" = "A large city (more than 3 million inhabitants)")
text_speaks_native <- c("US" = "Native")
text_speaks_well <- c("US" = "Well or very well")
text_speaks_somewhat <- c("US" = "Somewhat well")
text_speaks_no <- c("US" = "I cannot speak English")
text_education_no <- c("US" = "No schooling completed")
text_education_primary <- c("US" = "Primary school")
text_education_secondary <- c("US" = "Lower secondary school")
text_education_vocational <- c("US" = "Vocational degree")
text_education_high <- c("US" = "High school")
text_education_college <- c("US" = "College degree")
text_education_master <- c("US" = "Master's degree or above")
text_income_q1 <- c("US" = "less than $35,000")
text_income_q2 <- c("US" = "between $35,000 and $70,000")
text_income_q3 <- c("US" = "between $70,000 and $120,000")
text_income_q4 <- c("US" = "more than $120,000")
text_wealth_q1 <- c("US" = "Less than $0 (I have a net debt)")
text_wealth_q2 <- c("US" = "Close to $0")
text_wealth_q3 <- c("US" = "Between $4,000 and $120,000")
text_wealth_q4 <- c("US" = "Between $120,000 and $380,000")
text_wealth_q5 <- c("US" = "More than $380,000")
text_frequency_beef_daily <- c("US" = "Almost or at least daily")
text_frequency_beef_weekly <- c("US" = "One to four times per week")
text_frequency_beef_rarely <- c("US" = "Less than once a week")
text_frequency_beef_never <- c("US" = "Never")
text_transport_available_yes_easily <- c("US" = "Yes, public transport is easily and frequently available")
text_transport_available_yes_limited <- c("US" = "Yes, public transport is available but with limitations")
text_transport_available_not_so_much <- c("US" = "Not so much, public transport is available but with many limitations")
text_transport_available_not_at_all <- c("US" = "No, there is no public transport")
text_trust_govt_always <- c("US" = "Nearly all the time")
text_trust_govt_often <- c("US" = "Most of the time")
text_trust_govt_sometimes <- c("US" = "Only some of the time")
text_trust_govt_never <- c("US" = "Never")
text_inequality_not <- c("US" = "Not a problem at all")
text_inequality_small <- c("US" = "A small problem")
text_inequality_problem <- c("US" = "A problem")
text_inequality_serious <- c("US" = "A serious problem")
text_inequality_very_serious <- c("US" = "A very serious problem")
text_future_richer <- c("US" = "Richer, for example thanks to technological progress")
text_future_poorer <- c("US" = "Poorer, for example due to resource depletion and/or climate change")
text_future_as_rich <- c("US" = "About as rich as now on average")
text_envi_pro_envi <- c("US" = "We should make our society as sustainable as possible to avoid irreversible damages")
text_envi_anti_envi <- c("US" = "I believe we have more important goals than sustainability")
text_envi_progress <- c("US" = "Our civilization will develop so much that environmental issues will not be a problem in the distant future")
text_envi_collapse <- c("US" = "Our civilization will eventually collapse, it is useless to try making society more sustainable")
text_CC_exists_not <- c("US" = "is not a reality")
text_CC_exists_natural <- c("US" = "is mainly due to natural climate variability")
text_CC_exists_human <- c("US" = "is mainly due to human activity")
text_CC_dynamics_rise <- c("US" = "temperatures will continue to rise, just more slowly")
text_CC_dynamics_stabilize <- c("US" = "temperatures will stabilize")
text_CC_dynamics_decrease <- c("US" = "temperatures will decrease")
text_CC_dynamics_none <- c("US" = "none of the above: greenhouse gas emissions have no impact on temperatures")
text_CC_stoppable_no_influence <- c("US" = "Humans have no noticeable influence on the climate.")
text_CC_stoppable_adapt <- c("US" = "We’d better live with climate change rather than try to halt it. Stopping emissions would cause more harm than climate change itself.")
text_CC_stoppable_pessimistic <- c("US" = "We should stop emissions, but unfortunately this is not going to happen.")
text_CC_stoppable_policies <- c("US" = "Ambitious policies and raising awareness will eventually succeed in stopping emissions within the next century.")
text_CC_stoppable_optimistic <- c("US" = "Technologies and habits are changing and this will suffice to prevent disastrous climate change. We do not need ambitious policies.")
text_CC_talks_yearly <- c("US" = "Several times a year")
text_CC_talks_monthly <- c("US" = "Several times a month")
text_CC_talks_never <- c("US" = "Almost never")
text_equal_quota_yes <- c("US" = "Yes, this would be a fair solution")
text_equal_quota_no_grand_fathering <- c("US" = "No, those who currently pollute more should have more rights to pollute")
text_equal_quota_no_redistribution <- c("US" = "No, the poor or those who will be hurt more by climate change should be compensated more")
text_equal_quota_no_scale <- c("US" = "No, rights to pollute should not be defined at the individual level but at another level, for example at the country level")
text_equal_quota_no_restriction <- c("US" = "No, we should not restrict greenhouse gas emissions")
text_should_act_yes <- c("US" = "Yes")
text_should_act_depends <- c("US" = "It depends: only if it is part of a fair international agreement")
text_should_act_no <- c("US" = "No, by no means")
text_should_act_condition_compensation <- c("US" = "The US should take even more ambitious measures if other countries are less ambitious")
text_should_act_condition_reciprocity <- c("US" = "The US should take even more ambitious measures if other countries also take similar measures")
text_should_act_condition_free_riding <- c("US" = "The US should be less ambitious if other countries take ambitious measures")
# text_employment_positive <- c("US" = "Positive impacts")
# text_employment_no_impact <- c("US" = "No notable impact")
# text_employment_negative <- c("US" = "Negative impacts")
text_effects_positive <- c("US" = "Positive impacts", "US" = "Positive side effects")
text_effects_no_impact <- c("US" = "No notable impact", "US" = "No notable side effects")
text_effects_negative <- c("US" = "Negative impacts", "US" = "Negative side effects")
text_incidence_win <- c("US" = "Would win", "US" = "Win")
text_incidence_lose <- c("US" = "Would lose", "US" = "Would be lose", "US" = "Lose")
text_incidence_unaffected <- c("US" = "Would not be severely affected", "US" = "Be unaffected")
text_CC_worries_very <- c("US" = "Very worried")
text_CC_worries_worried <- c("US" = "Worried")
text_CC_worries_not <- c("US" = "Not worried")
text_CC_worries_not_at_all <- c("US" = "Not worried at all")
text_insulation_mandatory <- c("US" = "Mandatory: every building should be renovated before a certain date")
text_insulation_voluntary <- c("US" = "Voluntary: an owner should be able to not renovate their house")
# first: 1000km / second: 3000km / third: one_trip
text_flight_quota_rationing <- c("US" = "No one would be allowed to fly more than 12,000 miles between now and 2040.", "US" = "No one would be allowed to fly more than 40,000 miles between now and 2040.",
"US" = "No one would be allowed to fly more than one round-trip every two years.")
text_flight_quota_tradable <- c("US" = "Those who plan to not fly within a given year would be allowed to sell their “right to fly” to someone who wants to fly but has already reached their quota of 12,000 miles.",
"US" = "Those who plan to not fly within a given year would be allowed to sell their “right to fly” to someone who wants to fly but has already reached their quota of 40,000 miles.",
"US" = "Those who plan to not fly within a two-year period would be allowed to sell their “right to fly” to someone who wants to fly more than once during these two years.")
text_ban_incentives_force <- c("US" = "Governments should force people to protect the environment, even if it prevents people from doing what they want")
text_ban_incentives_encourage <- c("US" = "Governments should only encourage people to protect the environment, even if it means people do not always do the right thing")
text_interest_politics_no <- c("US" = "Not really or not at all")
text_interest_politics_little <- c("US" = "A little")
text_interest_politics_lot <- c("US" = "A lot")
text_media_TV_public <- c("US" = "TV (mostly public broadcasting channels)")
text_media_TV_private <- c("US" = "TV (mostly private channels)")
text_media_radio <- c("US" = "Radio")
text_media_social <- c("US" = "Social media (e.g., Facebook, Twitter, etc.)")
text_media_print <- c("US" = "Print media (e.g., print newspapers, magazines etc.)")
text_media_web <- c("US" = "News websites (e.g. online newspapers)")
text_media_other <- c("US" = "Other")
text_vote_participation_no_right <- c("US" = "I don't have the right to vote in the US")
text_survey_biased_pro_envi <- c("US" = "No, I do not feel it was biased")
text_survey_biased_anti_envi <- c("US" = "Yes, biased towards environmental causes")
text_survey_biased_no <- c("US" = "Yes, biased against the environment")
for (v in c(variables_burden_sharing, "trust_public_spending")) {
temp <-  2 * (e[[v]] %in% text_strongly_agree) + (e[[v]] %in% text_somewhat_agree) - (e[[v]] %in% text_somewhat_disagree) - 2 * (e[[v]] %in% text_strongly_disagree) - 0.1 * (e[[v]] %in% text_pnr)
e[[v]] <- as.item(temp, labels = structure(c(-2:2,-0.1),
names = c("Strongly disagree","Somewhat disagree","Neither agree or disagree","Somewhat agree","Strongly agree","PNR")),
missing.values=-0.1, annotation=Label(e[[v]]))
}
for (v in c(variables_policy , variables_tax)) {
temp <-  2 * (e[[v]] %in% text_support_absolutely) + (e[[v]] %in% text_support_somewhat) - (e[[v]] %in% text_support_not_really) - 2 * (e[[v]] %in% text_support_not_at_all) - 0.1 * (e[[v]] %in% text_pnr)
e[[v]] <- as.item(temp, labels = structure(c(-2:2,-0.1),
names = c("No, not at all","No, not really","Indifferent","Yes, somewhat","Yes, absolutely","PNR")),
missing.values=-0.1, annotation=Label(e[[v]]))
}
temp <-  (e$urbanity %in% text_small_town) + 2 * (e$urbanity %in% text_large_town) + 3 * (e$urbanity %in% text_small_city) + 4 * (e$urbanity %in% text_medium_city) + 5 * (e$urbanity %in% text_large_city)
e$urbanity <- as.item(temp, labels = structure(c(0:5),
# names = c("Rural","Small town","Large town","Small city","Medium-size city","Large city")),
names = c("Rural","5-20k","20-50k","50-250k","250k-3M",">3M")),
annotation=Label(e$urbanity))
temp <-  (e$speaks_well %in% text_speaks_well) + 2 * (e$speaks_well %in% text_speaks_native) - 1 * (e$speaks_well %in% text_speaks_no)
e$speaks_well <- as.item(temp, labels = structure(c(-1:2),
names = c("Cannot speak","Somewhat well","Well or very well","Native")),
annotation=Label(e$speaks_well))
temp <-  (e$education %in% text_education_primary) + 2 * (e$education %in% text_education_secondary) + 3 * (e$education %in% text_education_vocational) + 4 * (e$education %in% text_education_high) + 5 * (e$education %in% text_education_college) + 6 * (e$education %in% text_education_master)
e$education <- as.item(temp, labels = structure(c(0:6),
names = c("None", "Primary", "Lower secondary", "Vocational", "High school", "College degree", "Master degree")),
annotation=Label(e$education))
temp <-  (e$income %in% text_income_q1) + 2 * (e$income %in% text_income_q2) + 3 * (e$income %in% text_income_q3) + 4 * (e$income %in% text_income_q4)
e$income <- as.item(temp, labels = structure(c(1:4),
names = c("Q1","Q2","Q3","Q4")),
annotation=Label(e$income))
temp <-  (e$wealth %in% text_wealth_q1) + 2 * (e$wealth %in% text_wealth_q2) + 3 * (e$wealth %in% text_wealth_q3) + 4 * (e$wealth %in% text_wealth_q4) + 5 * (e$wealth %in% text_wealth_q5)
e$wealth <- as.item(temp, labels = structure(c(1:5),
names = c("Q1","Q2","Q3","Q4","Q5")),
annotation=Label(e$wealth))
temp <-  (e$frequency_beef %in% text_frequency_beef_rarely) + 2 * (e$frequency_beef %in% text_frequency_beef_weekly) + 3 * (e$frequency_beef %in% text_frequency_beef_daily)
e$frequency_beef <- as.item(temp, labels = structure(c(0:3),
names = c("Never", "Rarely", "Weekly", "Daily")),
annotation=Label(e$frequency_beef))
temp <-  (e$transport_available %in% text_transport_available_yes_limited) + 2 * (e$transport_available %in% text_transport_available_yes_easily) - (e$transport_available %in% text_transport_available_not_at_all) - 0.1*(e$transport_available %in% text_pnr)
e$transport_available <- as.item(temp, labels = structure(c(-1:2,-0.1),
names = c("Not at all", "Not so much", "Yes but limited", "Yes, easily")),
missing.values=-0.1, annotation=Label(e$transport_available))
temp <-  (e$trust_govt %in% text_trust_govt_sometimes) + 2 * (e$trust_govt %in% text_trust_govt_often) + 3 * (e$trust_govt %in% text_trust_govt_always) - 0.1*(e$trust_govt %in% text_pnr)
e$trust_govt <- as.item(temp, labels = structure(c(0:3,-0.1),
names = c("Never","Only some of the time","Most of the time","Nearly all the time","PNR")),
missing.values=-0.1, annotation=Label(e$trust_govt))
temp <-  2 * (e$inequality_problem %in% text_inequality_very_serious) + (e$inequality_problem %in% text_inequality_serious) - (e$inequality_problem %in% text_inequality_small) - 2 * (e$inequality_problem %in% text_inequality_not) - 0.1 * (e$inequality_problem %in% text_pnr)
e$inequality_problem <- as.item(temp, labels = structure(c(-2:2,-0.1),
names = c("Very serious problem","Serious problem","A problem","Small problem","Not a problem at all","PNR")),
missing.values=-0.1, annotation=Label(e$inequality_problem))
temp <-  (e$future_gdp %in% text_future_richer) - (e$future_gdp %in% text_future_poorer) - 0.1 * (e$future_gdp %in% text_pnr)
e$future_gdp <- as.item(temp, labels = structure(c(-1:1,-0.1),
names = c("Poorer","About as rich", "Richer","PNR")),
missing.values=-0.1, annotation=Label(e$future_gdp))
e$envi[e$envi %in% text_envi_pro_envi] <- "Pro environmental action"
e$envi[e$envi %in% text_envi_collapse] <- "Useless: collapse"
e$envi[e$envi %in% text_envi_anti_envi] <- "Other goals"
e$envi[e$envi %in% text_envi_progress] <- "Not a pb: progress"
temp <-  (e$CC_exists %in% text_CC_exists_human) - (e$CC_exists %in% text_CC_exists_not) - 0.1 * (e$CC_exists %in% text_pnr)
e$CC_exists <- as.item(temp, labels = structure(c(-1:1,-0.1),
names = c("Not a reality","Natural", "Anthropogenic","PNR")),
missing.values=-0.1, annotation=Label(e$CC_exists))
temp <-  (e$CC_dynamics %in% text_CC_dynamics_rise) - (e$CC_dynamics %in% text_CC_dynamics_decrease) - 2 * (e$CC_dynamics %in% text_CC_dynamics_none) - 0.1 * (e$CC_dynamics %in% text_pnr)
e$CC_dynamics <- as.item(temp, labels = structure(c(-2:1,-0.1),
names = c("No impact","Decrease", "Stabilize","Rise more slowly","PNR")),
missing.values=-0.1, annotation=Label(e$CC_dynamics))
e$CC_stoppable <- as.character(e$CC_stoppable)
e$CC_stoppable[e$CC_stoppable %in% text_CC_stoppable_no_influence] <- "No influence"
e$CC_stoppable[e$CC_stoppable %in% text_CC_stoppable_adapt] <- "Better to adapt"
e$CC_stoppable[e$CC_stoppable %in% text_CC_stoppable_optimistic] <- "Progress will suffice"
e$CC_stoppable[e$CC_stoppable %in% text_CC_stoppable_policies] <- "Policies & awareness will"
e$CC_stoppable[e$CC_stoppable %in% text_CC_stoppable_pessimistic] <- "Should but not happening"
temp <-  (e$CC_talks %in% text_CC_talks_monthly) - (e$CC_talks %in% text_CC_talks_never) - 0.1 * (e$CC_talks %in% text_pnr)
e$CC_talks <- as.item(temp, labels = structure(c(-1:1,-0.1),
names = c("Never","Yearly","Monthly","PNR")),
annotation=Label(e$CC_talks))
temp <-  2 * (e$equal_quota %in% text_equal_quota_no_redistribution) + (e$equal_quota %in% text_equal_quota_yes) - (e$equal_quota %in% text_equal_quota_no_grand_fathering) - 2 * (e$equal_quota %in% text_equal_quota_no_restriction) - 0.1 * (e$equal_quota %in% text_pnr)
e$equal_quota <- as.item(temp, labels = structure(c(-2:2,-0.1),
names = c("No, against restriction","No, grand-fathering","No, not individual level","Yes","No, more to vulnerable","PNR")),
missing.values=-0.1, annotation=Label(e$equal_quota))
temp <-  (e$country_should_act %in% text_should_act_yes) - (e$country_should_act %in% text_should_act_no) - 0.1 * (e$country_should_act %in% text_pnr)
e$country_should_act <- as.item(temp, labels = structure(c(-1:1,-0.1),
names = c("No","Only if international agreement", "Yes","PNR")),
missing.values=-0.1, annotation=Label(e$country_should_act))
e$country_should_act_condition[e$country_should_act_condition %in% text_should_act_condition_compensation] <- "Compensation"
e$country_should_act_condition[e$country_should_act_condition %in% text_should_act_condition_reciprocity] <- "Reciprocity"
e$country_should_act_condition[e$country_should_act_condition %in% text_should_act_condition_free_riding] <- "Free-riding"
for (v in c(variables_side_effects, variables_employment)) {
temp <-  (e[[v]] %in% text_effects_positive) - (e[[v]] %in% text_effects_negative) - 0.1 * (e[[v]] %in% text_pnr)
e[[v]] <- as.item(temp, labels = structure(c(-1:1,-0.1),
names = c("Negative","None notable","Positive","PNR")),
missing.values=-0.1, annotation=Label(e[[v]]))
}
for (v in c(variables_incidence)) { # TODO! why 0 missing?
temp <-  (e[[v]] %in% text_incidence_win) - (e[[v]] %in% text_incidence_lose) - 0.1 * (e[[v]] %in% text_pnr)
e[[v]] <- as.item(temp, labels = structure(c(-1:1,-0.1),
names = c("Lose","Unaffected","Win","PNR")),
missing.values=-0.1, annotation=Label(e[[v]]))
}
temp <-  (e$CC_worries %in% text_CC_worries_very) - (e$CC_worries %in% text_CC_worries_not) - 2 * (e$CC_worries %in% text_CC_worries_not_at_all) - 0.1 * (e$CC_worries %in% text_pnr)
e$CC_worries <- as.item(temp, labels = structure(c(-2:1,-0.1),
names = c("No worried at all","Not worried", "Worried","Very worried","PNR")),
missing.values=-0.1, annotation=Label(e$CC_worries))
e$insulation_compulsory[e$insulation_compulsory %in% text_insulation_mandatory] <- "Mandatory"
e$insulation_compulsory[e$insulation_compulsory %in% text_insulation_voluntary] <- "Voluntary"
e$flight_quota <- e$flight_quota_1000km
e$flight_quota[!is.na(e$flight_quota_3000km)] <- e$flight_quota_3000km[!is.na(e$flight_quota_3000km)]
e$flight_quota[!is.na(e$flight_quota_one_trip)] <- e$flight_quota_one_trip[!is.na(e$flight_quota_one_trip)]
label(e$flight_quota) <- "flight_quota: ~ Given that the govt decides to limit average flights per person, what do you prefer? Rationing / Tradable quota / PNR. Variants (distance per year): 1000km/3000km/one round-trip. [distance adjusted to country]"
variables_flight_quota <<- names(e)[grepl('flight_quota', names(e))]
for (v in variables_flight_quota) {
e[[v]][e[[v]] %in% text_flight_quota_rationing] <- "Rationing"
e[[v]][e[[v]] %in% text_flight_quota_tradable] <- "Tradable" }
e$variant_flight_quota <- ""
e$variant_flight_quota[!is.na(e$flight_quota_3000km)] <- "3000km"
e$variant_flight_quota[!is.na(e$flight_quota_1000km)] <- "1000km"
e$variant_flight_quota[!is.na(e$flight_quota_one_trip)] <- "1 trip"
e$ban_incentives[e$ban_incentives %in% text_ban_incentives_encourage] <- "Encourage"
e$ban_incentives[e$ban_incentives %in% text_ban_incentives_force] <- "Force"
temp <-  (e$interest_politics %in% text_interest_politics_lot) - (e$interest_politics %in% text_interest_politics_no) - 0.1 * (e$interest_politics %in% text_pnr)
e$interest_politics <- as.item(temp, labels = structure(c(-1:1,-0.1),
names = c("Not really or not at all","A little", "A lot","PNR")),
missing.values=-0.1, annotation=Label(e$interest_politics))
e$media[e$media %in% text_media_other] <- "Other"
e$media[e$media %in% text_media_print] <- "Print"
e$media[e$media %in% text_media_radio] <- "Radio"
e$media[e$media %in% text_media_social] <- "Social media"
e$media[e$media %in% text_media_TV_private] <- "TV (private)"
e$media[e$media %in% text_media_TV_public] <- "TV (public)"
e$media[e$media %in% text_media_web] <- "News websites"
e$vote_participation[e$vote_participation %in% text_vote_participation_no_right] <- "No right to vote"
e$survey_biased[e$survey_biased %in% text_survey_biased_pro_envi] <- "Yes, pro environment"
e$survey_biased[e$survey_biased %in% text_survey_biased_anti_envi] <- "Yes, anti environment"
e$survey_biased[e$survey_biased %in% text_survey_biased_no] <- "No"
e$wtp <- as.numeric(as.vector(gsub('[[:alpha:] $]', '', e$wtp))) # /!\ Careful with different currencies and use of cents vs. currency (for US $, not pb as cents are not used)
# TODO: CC_affected, label should_act_condition & vote, nb_policies_supported, score_knowlege_CC, score_trust, zipcode, race
e$left_right <- pmax(-2,pmin(2,-2 * e$far_left - 1*e$left + 1*e$right + 2 * e$far_right))
is.na(e$left_right) <- (e$left_right == 0) & !e$center
e$Left_right <- as.factor(e$left_right)
e$left_right <- as.item(as.numeric(as.vector(e$left_right)), labels = structure(c(-2:2),
names = c("Far left", "Left or center-left", "Center", "Right or center-right", "Far right")), annotation="left_right: scale from -2 (far left) to +2 (far right) - Political leaning - How would you define yourself? Multiple answers are possible: (Far) left/Center/(Far) right/Liberal/Conservative/Humanist/Patriot/Apolitical/Environmentalist/Feminist/Other (specify)")
levels(e$Left_right) <- c("Far left", "Left or center-left", "Center", "Right or center-right", "Far right", "Indeterminate")
e$Left_right[is.na(e$Left_right)] <- "Indeterminate"
e$indeterminate <- e$Left_right == "Indeterminate"
e$left_right_pnr <- as.character(e$left_right)
e$left_right_pnr[e$Left_right=='Indeterminate'] <- 'PNR'
e$left_right_pnr <- as.factor(e$left_right_pnr)
e$left_right_pnr <- relevel(relevel(e$left_right_pnr, "Left or center-left"), "Far left")
e$country <- country
# e <- e[, -c(9:17)]
return(e)
}
prepare <- function(exclude_speeder=TRUE, exclude_screened=TRUE, only_finished=TRUE, only_known_agglo=T, duration_min=0, country = "US") { # , exclude_quotas_full=TRUE
e <- read_csv("../data/US_pilot.csv") #[-c(1:2),]
e <- relabel_and_rename(e)
print(paste(length(which(e$excluded=="QuotaMet")), "QuotaMet"))
e$finished[e$excluded=="QuotaMet"] <- "False" # To check the number of QuotaMet that shouldn't have incremented the quota, comment this line and: decrit(e$each_strate[e$exclu=="QuotaMet" & e$csp=="Employé" & !grepl("2019-03-04 07", e$date)])
if (exclude_screened) { e <- e[is.na(e$excluded),] }
if (exclude_speeder) { e <- e[as.numeric(as.vector(e$duration)) > duration_min,] }
if (only_finished) { # TODO: le faire marcher même pour les autres
e <- e[e$finished==1,]
e <- convert(e, country="US")
# e$weight <- weighting(e) TODO
# e$left_right_na <- as.numeric(e$left_right)
# e$left_right_na[e$indeterminate == T] <- wtd.mean(e$left_right, weights = e$weight)
} else {
}
# e$sample <- "a"
# e$sample[e$finished=="True"] <- "e"
# e$sample[e$finished=="True" & n(e$duration) > duration_min] <- "p"
# e$sample[e$finished=="True" & n(e$duration) > duration_min & e$excluded==""] <- "r"
return(e)
}
e <- prepare(country = "US")
# setwd("/var/www/oecd_climate/code_oecd")
setwd("C:/Users/afabre/Google Drive/Economie/Travail/oecd_climate/code_oecd")
##### Feedback ######
decrit("survey_biased", data = e) # 50% Pro-envi biased. TODO: Change?
e <- prepare(country = "US")
##### Feedback ######
decrit("survey_biased", data = e) # 50% Pro-envi biased. TODO: Change?
##### Preference 1: emission limit for cars ######
decrit("standard_exists", data = e)
decrit("standard_trust", data = e)
decrit("standard_trust", data = e)
for (v in variables_standard_incidence) print(decrit(v, data = e))
names_policies <- c("standard", "investments", "tax_transfers")
e$policies_trust <- (e$standard_trust=="Yes") + (e$investments_trust=="Yes") + (e$tax_transfers_trust=="Yes") - (e$standard_trust=="No") - (e$investments_trust=="No") - (e$tax_transfers_trust=="No")
e$policies_effective <- (e$standard_effective=="Yes") + (e$investments_effective=="Yes") + (e$tax_transfers_effective=="Yes") - (e$standard_effective=="No") - (e$investments_effective=="No") - (e$tax_transfers_effective=="No")
e$policies_employment <- (e$standard_employment=="Yes") + (e$investments_employment=="Yes") + (e$tax_transfers_employment=="Yes") - (e$standard_employment=="No") - (e$investments_employment=="No") - (e$tax_transfers_employment=="No")
e$policies_side_effects <- (e$standard_side_effects=="Yes") + (e$investments_side_effects=="Yes") + (e$tax_transfers_side_effects=="Yes") - (e$standard_side_effects=="No") - (e$investments_side_effects=="No") - (e$tax_transfers_side_effects=="No")
e$policies_support <- (e$standard_support=="Yes") + (e$investments_support=="Yes") + (e$tax_transfers_support=="Yes") - (e$standard_support=="No") - (e$investments_support=="No") - (e$tax_transfers_support=="No")
e$policies_self <- e$policies_incidence <- 0
for (v in variables_incidence) e$policies_incidence <- e$policies_incidence + e[[v]]
for (v in names_policies) e$policies_self <- e$policies_self + e[[paste(v, "self", sep="_")]]
for (v in names_policies) e$policies_self <- e$policies_self + e[[paste(v, "incidence_self", sep="_")]]
##### Treatment effects #####
summary(lm(standard_exists=="Yes" ~ treatment_climate * treatment_policy, data = e))
summary(lm(standard_support=="Yes" ~ treatment_climate * treatment_policy, data = e))
summary(lm(investments_support=="Yes" ~ treatment_climate * treatment_policy, data = e))
summary(lm(tax_transfers_support=="Yes" ~ treatment_climate * treatment_policy, data = e))
summary(lm(policies_support ~ treatment_climate * treatment_policy, data = e))
summary(lm(policies_trust ~ treatment_climate * treatment_policy, data = e))
summary(lm(policies_effective ~ treatment_climate * treatment_policy, data = e))
summary(lm(policies_employment ~ treatment_climate * treatment_policy, data = e))
summary(lm(policies_side_effects ~ treatment_climate * treatment_policy, data = e))
summary(lm(policies_self ~ treatment_climate * treatment_policy, data = e))
summary(lm(policies_incidence ~ treatment_climate * treatment_policy, data = e))
decrit(e$policies_employment)
e$policies_employment <- (e$standard_employment=="Positive") + (e$investments_employment=="Positive") + (e$tax_transfers_employment=="Positive") - (e$standard_employment=="Negative") - (e$investments_employment=="Negative") - (e$tax_transfers_employment=="Negative")
summary(lm(policies_employment ~ treatment_climate * treatment_policy, data = e))
summary(lm(policies_side_effects ~ treatment_climate * treatment_policy, data = e))
decrit(e$standard_side_effects)
e$policies_side_effects <- (e$standard_side_effects=="Positive") + (e$investments_side_effects=="Positive") + (e$tax_transfers_side_effects=="Positive") - (e$standard_side_effects=="Negative") - (e$investments_side_effects=="Negative") - (e$tax_transfers_side_effects=="Negative")
summary(lm(policies_side_effects ~ treatment_climate * treatment_policy, data = e))
decrit(e$urban_category)
e$core_metropolitan <- e$urban_category==1
decrit(e$Left_right)
variables_main_controls <<- c("gender", "age", "income", "education", "hit_by_covid", "employment_status", "Left_right")
##### Treatment effects #####
end_formula <- paste("~ treatment_climate * treatment_policy + ", paste(variables_reg_self_interest, collapse = ' + '))
##### Treatment effects #####
end_formula <- paste("~ treatment_climate * treatment_policy + ", paste(variables_main_controls, collapse = ' + '))
summary(lm(as.formula(paste("standard_exists=='Yes' ~", end_formula)), data = e)) # effect although we expect none
paste("standard_exists=='Yes' ~", end_formula)
##### Treatment effects #####
end_formula <- paste("treatment_climate * treatment_policy + ", paste(variables_main_controls, collapse = ' + '))
summary(lm(as.formula(paste("standard_exists=='Yes' ~", end_formula)), data = e)) # effect although we expect none
summary(lm(as.formula(paste("standard_exists=='Yes' ~", end_formula)), data = e)) # effect although we expect none
##### Treatment effects #####
end_formula <- paste(paste(variables_main_controls, collapse = ' + '), " + treatment_climate * treatment_policy")
summary(lm(as.formula(paste("standard_exists=='Yes' ~", end_formula)), data = e)) # effect although we expect none
summary(lm(as.formula(paste("standard_support=='Yes' ~", end_formula)), data = e))
summary(lm(as.formula(paste("investments_support=='Yes' ~", end_formula)), data = e))
summary(lm(as.formula(paste("tax_transfers_support=='Yes' ~", end_formula)), data = e)) # negative effect of climate video
summary(lm(as.formula(paste("policies_support ~", end_formula)), data = e)) # effect of interaction
summary(lm(as.formula(paste("policies_trust ~", end_formula)), data = e))
summary(lm(as.formula(paste("policies_effective ~", end_formula)), data = e))
summary(lm(as.formula(paste("policies_employment ~", end_formula)), data = e))
summary(lm(as.formula(paste("policies_side_effects ~", end_formula)), data = e))
summary(lm(as.formula(paste("policies_self ~", end_formula)), data = e)) # effect of interaction
summary(lm(as.formula(paste("policies_incidence ~", end_formula)), data = e))
# Correlations of support with motives
summary(lm(policies_support ~ policies_trust + policies_effective + policies_employment + policies_side_effects +
policies_self + policies_incidence + treatment_climate * treatment_policy, data = e))
summary(lm(standard_support ~ standard_trust + standard_effective + standard_employment + standard_side_effects +
standard_self + standard_incidence + treatment_climate * treatment_policy, data = e))
summary(lm(standard_support ~ standard_trust + standard_effective + standard_employment + standard_side_effects +
standard_incidence_self + treatment_climate * treatment_policy, data = e))
# Correlations of support with motives
summary(lm(policies_support ~ policies_trust + policies_effective + policies_employment + policies_side_effects +
policies_self + policies_incidence + treatment_climate * treatment_policy, data = e))
summary(lm(standard_support ~ standard_trust + standard_effective + standard_employment + standard_side_effects +
standard_incidence_self + treatment_climate * treatment_policy, data = e))
summary(lm(standard_support=='Yes' ~ standard_trust + standard_effective + standard_employment + standard_side_effects +
standard_incidence_self + treatment_climate * treatment_policy, data = e))
summary(lm(standard_support=='Yes' ~ standard_trust + standard_effective + standard_employment + standard_side_effects, data = e))
summary(lm(standard_support=='Yes' ~ standard_incidence_self + treatment_climate * treatment_policy, data = e))
summary(lm(standard_support=='Yes' ~ standard_trust + standard_effective +standard_incidence_self + treatment_climate * treatment_policy, data = e))
summary(lm(standard_support=='Yes' ~ standard_employment + standard_side_effects +
standard_incidence_self + treatment_climate * treatment_policy, data = e))
summary(lm(standard_support=='Yes' ~ standard_effective + standard_employment + standard_side_effects +
standard_incidence_self + treatment_climate * treatment_policy, data = e))
summary(lm(standard_support=='Yes' ~ standard_trust + standard_employment + standard_side_effects +
standard_incidence_self + treatment_climate * treatment_policy, data = e))
decrit(e$standard_effective)
summary(lm(standard_support=='Yes' ~ standard_trust + standard_employment + standard_side_effects +
standard_incidence_self + treatment_climate * treatment_policy, data = e))
summary(lm(standard_support=='Yes' ~ standard_employment + standard_side_effects +
standard_incidence_self + treatment_climate * treatment_policy, data = e))
summary(lm(investment_support=='Yes' ~ investment_trust + investment_effective + investment_employment + investment_side_effects +
investment_incidence_self + treatment_climate * treatment_policy, data = e))
summary(lm(investment_support=='Yes' ~ investment_employment + investment_side_effects +
investment_incidence_self + treatment_climate * treatment_policy, data = e))
summary(lm(investments_support=='Yes' ~ investments_trust + investments_effective + investments_employment + investments_side_effects +
investments_incidence_self + treatment_climate * treatment_policy, data = e))
summary(lm(investments_support=='Yes' ~ investments_employment + investments_side_effects +
investments_incidence_self + treatment_climate * treatment_policy, data = e))
summary(lm(tax_transfers_support=='Yes' ~ tax_transfers_trust + tax_transfers_effective + tax_transfers_employment + tax_transfers_side_effects +
tax_transfers_incidence_self + treatment_climate * treatment_policy, data = e))
summary(lm(tax_transfers_support=='Yes' ~ tax_transfers_employment + tax_transfers_side_effects +
tax_transfers_incidence_self + treatment_climate * treatment_policy, data = e))
summary(lm(as.formula(paste("policies_support ~ policies_trust + policies_effective + policies_employment + policies_side_effects +
standard_incidence_self + treatment_climate * treatment_policy", end_formula)), data = e))
summary(lm(as.formula(paste("policies_support ~ policies_effective + policies_employment + policies_side_effects +
standard_incidence_self + treatment_climate * treatment_policy", end_formula)), data = e))
summary(lm(as.formula(paste(
"policies_support ~ policies_trust + policies_effective + policies_employment + policies_side_effects + standard_incidence_self + treatment_climate * treatment_policy",
end_formula)), data = e))
summary(lm(as.formula(paste("policies_support ~ policies_trust + policies_effective + policies_employment + policies_side_effects + standard_incidence_self + treatment_climate * treatment_policy",
end_formula)), data = e))
summary(lm(as.formula(paste("policies_support ~ policies_trust + policies_effective + policies_employment + policies_side_effects + standard_incidence_self + treatment_climate * treatment_policy", end_formula)), data = e))
summary(lm(as.formula(paste("policies_support ~ policies_trust + policies_effective + policies_employment + policies_side_effects + standard_incidence_self +", end_formula)), data = e))
summary(lm(as.formula(paste("policies_support ~ policies_trust + policies_effective + policies_employment + policies_side_effects + standard_incidence_self +", end_formula)), data = e))
summary(lm(as.formula(paste("policies_support ~ policies_trust + policies_effective + policies_employment + policies_side_effects + standard_incidence_self +", end_formula)), data = e))
summary(lm(as.formula(paste("standard_support=='Yes' ~ standard_trust + standard_effective + standard_employment + standard_side_effects + standard_self + standard_incidence +", end_formula)), data = e))
summary(lm(as.formula(paste("standard_support=='Yes' ~ standard_trust + standard_effective + standard_employment + standard_side_effects + standard_incidence_self +", end_formula)), data = e))
summary(lm(as.formula(paste("standard_support=='Yes' ~ standard_employment + standard_side_effects + standard_incidence_self +", end_formula)), data = e))
summary(lm(as.formula(paste("investments_support=='Yes' ~ investments_trust + investments_effective + investments_employment + investments_side_effects + investments_incidence_self +", end_formula)), data = e))
summary(lm(as.formula(paste("tax_transfers_support=='Yes' ~ tax_transfers_trust + tax_transfers_effective + tax_transfers_employment + tax_transfers_side_effects + tax_transfers_incidence_self +", end_formula)), data = e))
summary(lm(as.formula(paste("investments_support=='Yes' ~ investments_trust + investments_employment + investments_side_effects + investments_incidence_self +", end_formula)), data = e))
summary(lm(as.formula(paste("investments_support=='Yes' ~ investments_employment + investments_side_effects + investments_incidence_self +", end_formula)), data = e))
summary(lm(as.formula(paste("standard_support=='Yes' ~ standard_employment + standard_side_effects + standard_incidence_self +", end_formula)), data = e))
summary(lm(as.formula(paste("investments_support=='Yes' ~ investments_employment + investments_side_effects + investments_incidence_self +", end_formula)), data = e))
summary(lm(as.formula(paste("tax_transfers_support=='Yes' ~ tax_transfers_employment + tax_transfers_side_effects + tax_transfers_incidence_self +", end_formula)), data = e))
summary(lm(tax_transfers_support=="Yes" ~ treatment_climate, data = e))
summary(lm(as.formula(paste("tax_transfers_support=='Yes' ~ treatment_climate +", paste(variables_main_controls, collapse = ' + '))), data = e))
summary(lm(as.formula(paste("tax_transfers_support=='Yes' ~ treatment_climate +", paste(variables_main_controls, collapse = ' + '))), data = e))
summary(lm(tax_transfers_support=="Yes" ~ treatment_climate, data = e))
decrit("tax_transfers_support", data = e)
decrit(e2$duree)
write.dta(e2, "externe2.dta")
getwd()
write_dta(e2, "externe2.dta")
package("haven")
write_dta(e2, "externe2.dta")
save.dta13(e2, "externe2.dta")
save.dta13(e2, "externe.dta")
write_dta(e2, "externe.dta")
write.dta(e2[,c(1:28,220:233)], "externe2.dta")
names(e2)
write.dta(e2[,c(1:19,237:250,191:193,95:139,205:217, 152:170,)], "externe2.dta")
write.dta(e2[,c(1:19,237:250,191:193,95:139,205:217, 152:170)], "externe2.dta")
write.dta(e2[,c(1:19,237:250,191:193,205:217, 152:170)], "externe2.dta")
decrit(e2$connaissance_CCC)
decrit(e2$connait_CCC)
write.dta(e2[,c(1:19,237:250,191:193,95:103,105:117,126:139,205:217, 152:170)], "externe2.dta")
write.dta(e2[,c(1:19,237:250,191:193,126:139,205:217, 152:170)], "externe2.dta")
write.dta(e2[,c(1:19,237:250,191:193,95:103,126:139,205:217, 152:170)], "externe2.dta")
write.dta(e2[,c(1:19,237:250,191:193,95:103,126:139,205:217, 105:115,152:170)], "externe2.dta")
decrit(ccc$s7_q1)
