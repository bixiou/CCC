temp[s$connaissance_CCC_internet==T | s$connaissance_CCC_internet=="internet"] <- 2
s$Connaissance_CCC <- as.item(temp, labels = structure(c(-2:3), names=c("hors sujet", "faux", "aucune", "trop vague", "approximatif", "bonne")),
annotation="Connaissance_CCC: connaissance_CCC recodé en hors sujet/faux/aucune/approximatif/bonne (incl. internet) - Décrivez ce que vous savez de la Convention Citoyenne pour le Climat. (champ libre)")
which(is.missing(s$Connaissance_CCC) & !is.na(s$connaissance_CCC))
s$connaissance_CCC[which(is.missing(s$Connaissance_CCC) & !is.na(s$connaissance_CCC))]
s$connaissance_CCC[201]
s$Connaissance_CCC <- NA
s$connaissance_CCC_bon_francais <- s$connaissance_CCC_sortition <- s$connaissance_CCC_mesures <- s$connaissance_CCC_temporalite <- s$connaissance_CCC_internet <- s$connaissance_CCC == "FALSE"
s$connaissance_CCC_150 <- s$connaissance_CCC == "FALSE"
s$Connaissance_CCC[c(1,3,10,13,17,19,29,30,34,45,49,51,54,57,64,68,74,77,78,86,93,97,103,121,129,136,139,151,153,155,156,159,162,163,164,174,179,181,182,183,184,187,191,194,196,197,201)] <- "aucune" #
s$Connaissance_CCC[c(208,210,217,218,223,232,236,242,250,255,259,260,266,268,271,272,278,282,285,289,291,297,298,301,310,312,313,324,327,328,349,352,355,357,361,372)] <- "aucune" #
s$Connaissance_CCC[c(383,385,389,390,394,402,410,411,415,416,417,419,421,422,424,425,429,431,442,444,446,450,451,457,458,461,463,465,466,468,469,472,476,485,487,488,492)] <- "aucune" # ex: "nsp" 19, 402, # doublons 450-451, 421-422, 468-469, 515-516?
s$Connaissance_CCC[c(6,22,25,66,72,80,90,100,107,110,111,152,166,170,177,188,214,227,238,276,281,316,319,320,323,339,360,387,393,396,399,408,432,452,454,474,498,503)] <- "hors sujet" # ex: 25, 71, 90, 107 # 25-110-432 doublon ?
s$Connaissance_CCC[c(8,15,18,20,26,27,28,43,65,75,84,85,89,101,123,132,135,140,142,144,145,147,165,168,172,176,207,220,222,240,247,275,288,303,308,341,347,348,351,356,364,377,473,493)] <- "approximatif"
s$Connaissance_CCC[c(7,24,62,67,71,84,91,106,117,127,130,131,134,150,154,158,173,175,186,202,209,226,246,247,253,262,284,302,307,334,337,380,386,391,400,407,418,420,428,440,448,449,470,481)] <- "bonne" # ex: 24, 117, 334 ; contient généralement mesures, sortition, 150 ou date
s$connaissance_CCC_bon_francais[c(6,15,18,20,24,27,62,84,85,91,130,134,140,145,154,158,165,170,175,193,202,207,220,226,242,247,248,253,262,288,347,348,351,356,360,364,377,380,386,387,391)] <- "bon français" # ex: ; pas de faute d'orthographe, grammaire correcte, phrase élaborée (i.e. pas juste "je ne sais pas")
s$connaissance_CCC_sortition[c(7,62,67,71,91,106,127,130,131,134,150,154,158,165,173,175,186,202,207,209,239,246,247,253,262,284,302,308,334,348,380,407,420,428,440,448,449,470,481)] <- "sortition"
s$Connaissance_CCC[c(496,502,515,516,520,526,532,533,534,535,537,540,541,546,548,550,551,552,553,555,557,560,561,562,564,567,568,572)] <- "aucune" #
s$Connaissance_CCC[c(510,570)] <- "hors sujet" # ex: 25, 71, 90, 107, 570 # 25-110-432 doublon ?
s$Connaissance_CCC[c(9,31,33,35,37,38,55,59,81,101,120,193,202,233,235,237,249,252,273,293,294,311,358,359,363,367,374,414,434,455,457,460,479,482,484,490,508,519,522,524,538)] <- "trop vague" # ex: 374, 457, 490 [490 = 2.0?]
s$Connaissance_CCC[c(401,404,423,427,505,506,507,530,531)] <- "approximatif"
s$Connaissance_CCC[c(494,501,514,542,547,558,563,566)] <- "bonne" # ex: 24, 117, 334 ; contient généralement mesures, sortition, 150 ou date
s$Connaissance_CCC[c(73,118,143,239,248,270,280,283,326,381,388,471,489,491,504)] <- "faux" # ex: 239, 326
s$connaissance_CCC_internet[c(44,70,239,279,512)] <- "internet"
s$connaissance_CCC_sortition[c(494,501,514,530,542,547,558,566)] <- "sortition"
s$connaissance_CCC_mesures[c(7,62,67,71,130,135,142,154,175,186,202,226,246,262,302,307,337,356,386,400,404,407,428,448,449,481,494,505,531,558,563,566)] <- "mesures"
s$connaissance_CCC_temporalite[c(84,117,131,150,172,235,249,293,302,427,501)] <- "temporalité"
s$connaissance_CCC_bon_francais[c(399,404,418,419,423,425,434,448,449,454,457,460,470,471,473,481,488,493,501,507,508,522,542,562)] <- "bon français" # ex: ; pas de faute d'orthographe, grammaire correcte, phrase élaborée (i.e. pas juste "je ne sais pas")
s$connaissance_CCC_150[c(grepl('150', s$connaissance_CCC),470)] <- "150"
temp <- -2*(s$Connaissance_CCC=="hors sujet") -1*(s$Connaissance_CCC=="faux") + 1*(s$Connaissance_CCC=="trop vague") + 2*(s$Connaissance_CCC=="approximatif") + 3*(s$Connaissance_CCC=="bonne")
temp[s$connaissance_CCC_internet==T | s$connaissance_CCC_internet=="internet"] <- 2
s$Connaissance_CCC <- as.item(temp, labels = structure(c(-2:3), names=c("hors sujet", "faux", "aucune", "trop vague", "approximatif", "bonne")),
annotation="Connaissance_CCC: connaissance_CCC recodé en hors sujet/faux/aucune/approximatif/bonne (incl. internet) - Décrivez ce que vous savez de la Convention Citoyenne pour le Climat. (champ libre)")
which(is.missing(s$Connaissance_CCC) & !is.na(s$connaissance_CCC))
decrit(s$Connaissance_CCC)
variables_connaissance_CCC <<- c("bon_francais", "sortition", "mesures", "temporalite", "internet", "150")
for (v in variables_connaissance_CCC) s[[paste("connaissance_CCC", v, sep="_")]] <- s[[paste("connaissance_CCC", v, sep="_")]]!="FALSE"
decrit(s$connaissance_CCC_150)
decrit(s$connaissance_CCC_mesures)
s$connaissance_CCC_150[c(grepl('150', s$connaissance_CCC),470)] <- "150"
decrit(s$connaissance_CCC_150)
s$connaissance_CCC_150[which(c(grepl('150', s$connaissance_CCC)),470)] <- "150"
decrit(s$connaissance_CCC_150)
variables_connaissance_CCC <<- c("bon_francais", "sortition", "mesures", "temporalite", "internet", "150")
for (v in variables_connaissance_CCC) s[[paste("connaissance_CCC", v, sep="_")]] <- s[[paste("connaissance_CCC", v, sep="_")]]!="FALSE"
temp <- -2*(s$Connaissance_CCC=="hors sujet") -1*(s$Connaissance_CCC=="faux") + 1*(s$Connaissance_CCC=="trop vague") + 2*(s$Connaissance_CCC=="approximatif") + 3*(s$Connaissance_CCC=="bonne")
temp[s$connaissance_CCC_internet==T] <- 2
s$Connaissance_CCC <- as.item(temp, labels = structure(c(-2:3), names=c("hors sujet", "faux", "aucune", "trop vague", "approximatif", "bonne")),
annotation="Connaissance_CCC: connaissance_CCC recodé en hors sujet/faux/aucune/approximatif/bonne (incl. internet) - Décrivez ce que vous savez de la Convention Citoyenne pour le Climat. (champ libre)")
decrit(s$Connaissance_CCC)
decrit(s$connaissance_CCC)
convert_s <- function(s) {
# lab <- label(s$csp)
# s$csp <- factor(s$csp, levels=c(levels(s$csp), "Cadres", "Indépendants", "Ouvriers", 'Inactifs', "Professions intermédiaires", "Retraités", "Employés", "Agriculteurs"))
# s$csp <- as.character(s$csp)
s$csp[grepl("cadre",s$csp)] <- "Cadre"
s$csp[grepl("Artisan",s$csp)] <- "Indépendant"
s$csp[grepl("iaire",s$csp)] <- "Intermédiaire"
s$csp[grepl("etrait",s$csp)] <- "Retraité"
s$csp[grepl("Employ",s$csp)] <- "Employé"
s$csp[grepl("Agricul",s$csp)] <- "Agriculteur"
s$csp[grepl("Ouvrier",s$csp)] <- "Ouvrier"
s$csp[grepl("Inactif",s$csp)] <- "Inactif"
# label(s$csp) <- lab
# s$csp <- as.factor(s$csp)
for (i in 1:length(s)) {
# levels(s[[i]]) <- c(levels(s[[i]]), "NSP")
s[[i]][s[[i]] == "NSP (Ne sais pas, ne se prononce pas)"] <- "NSP"
s[[i]][s[[i]] == "NSP (Ne sait pas, ne se prononce pas)"] <- "NSP"
s[[i]][s[[i]] == "NSP (Ne sais pas, ne se prononce pas)."] <- "NSP"
s[[i]][s[[i]] == "NSP (Ne sait pas, ne se prononce pas)."] <- "NSP"
s[[i]][s[[i]] == "NSP (Ne sais pas, ne souhaite pas répondre)"] <- "NSP"
s[[i]][s[[i]] == "NSP (Ne sait pas, ne veut pas répondre)"] <- "NSP"
s[[i]][s[[i]] == "NSP (Ne veut pas répondre)"] <- "NSP"
s[[i]][s[[i]] == "Ne se prononce pas"] <- "NSP"
}
# s$mauvaise_qualite <- 0 # 99% if we exclude those from revenu, 92% otherwise
# s$mauvaise_qualite[n(s$revenu) > n(s$rev_tot)] <- 1 + s$mauvaise_qualite[n(s$revenu) > n(s$rev_tot)] # 164
# s$mauvaise_qualite[n(s$revenu) > 10000] <- 1 + s$mauvaise_qualite[n(s$revenu) > 10000] # 58
# s$mauvaise_qualite[n(s$rev_tot) > 10000] <- 1 + s$mauvaise_qualite[n(s$rev_tot) > 10000] # 55
s$revenu <- clean_number(s$revenu, high_numbers='divide')
s$rev_tot <- clean_number(s$rev_tot, high_numbers='divide') # TODO: check ça
# s$revenu[s$revenu > 10000] <- wtd.mean(s$revenu[s$revenu < 10000], weights = s$weight[s$revenu < 10000], na.rm=T)
# s$rev_tot[s$rev_tot > 10000] <- wtd.mean(s$rev_tot[s$rev_tot < 10000], weights = s$weight[s$rev_tot < 10000], na.rm=T)
for (i in c( # TODO: check number outliers
"revenu", "rev_tot", "taille_menage", "nb_adultes", "nb_14_et_plus", "duree", "km_0", "km_1", "km_2", "conso_1", "conso_2", "surface",
"obstacles_lobbies", "obstacles_manque_volonte", "obstacles_manque_cooperation", "obstacles_inegalites", "obstacles_incertitudes",
"obstacles_demographie", "obstacles_technologies", "obstacles_rien", "part_anthropique", "redistribution", "importance_environnement",
"importance_associatif", "importance_confort", "duree_info_CCC", "duree_concentration", "question_confiance", "variante_efforts_vous", # "simule_gagnant",
"hausse_chauffage", "hausse_depenses", "hausse_diesel", "hausse_essence", "nb_vehicules"
)) {
lab <- label(s[[i]])
s[[i]] <- as.numeric(as.vector(s[[i]]))
label(s[[i]]) <- lab
}
# s$mauvaise_qualite[s$taille_menage < s$nb_adultes | s$taille_menage < s$nb_14_et_plus] <- 1.3 + s$mauvaise_qualite[s$taille_menage < s$nb_adultes | s$taille_menage < s$nb_14_et_plus] # 15
# s$mauvaise_qualite[s$taille_menage > 12] <- 1.3 + s$mauvaise_qualite[s$taille_menage > 12] # 10
# s$mauvaise_qualite[s$nb_14_et_plus > 10] <- 1 + s$mauvaise_qualite[s$nb_14_et_plus > 10] # 2
s$taille_menage <- pmin(s$taille_menage, 12)
s$nb_14_et_plus <- pmin(s$nb_14_et_plus, 10)
s$nb_adultes <- pmin(s$nb_adultes, 5)
# s$mauvaise_qualite[s$km > 10^6] <- 1 + s$mauvaise_qualite[s$km > 10^6] # 1
# s$mauvaise_qualite[s$surface < 9] <- 1 + s$mauvaise_qualite[s$surface < 9] # 6
# s$mauvaise_qualite[s$surface >= 1000] <- 1 + s$mauvaise_qualite[s$surface >= 1000] # 4
# label(s$mauvaise_qualite) <- "mauvaise_qualite: Indicatrice d'une réponse aberrante à revenu, taille_menage, nb_14_et_plus, km ou surface."
for (j in c("taxe_approbation", "taxe_feedback_approbation", "pour_sortition"
)) {
s[j][[1]] <- as.item(as.character(s[j][[1]]),
labels = structure(c("","Non","NSP","Oui"), names = c("NA","Non","NSP","Oui")),
missing.values = c("","NSP"), annotation=attr(s[j][[1]], "label"))
}
s$pour_taxe_carbone[!is.na(s$pour_taxe_carbone_contre)] <- s$pour_taxe_carbone_contre[!is.na(s$pour_taxe_carbone_contre)]
s$pour_taxe_carbone[!is.na(s$pour_taxe_carbone_pour)] <- s$pour_taxe_carbone_pour[!is.na(s$pour_taxe_carbone_pour)]
s$pour_taxe_carbone[!is.na(s$pour_taxe_carbone_neutre)] <- s$pour_taxe_carbone_neutre[!is.na(s$pour_taxe_carbone_neutre)]
s$variante_taxe_carbone[!is.na(s$pour_taxe_carbone_neutre)] <- 'neutre'
s$variante_taxe_carbone[!is.na(s$pour_taxe_carbone_contre)] <- 'contre'
s$variante_taxe_carbone[!is.na(s$pour_taxe_carbone_pour)] <- 'pour'
label(s$pour_taxe_carbone) <- "pour_taxe_carbone: ~ Favorable à une augmentation de la taxe carbone (Oui/Non/NSP) ~ sachant que majorité de Français pour/contre/no info (variante_taxe_carbone)"
label(s$variante_taxe_carbone) <- "variante_taxe_carbone: Variante aléatoire pour pour_taxe_carbone: neutre/pour/contre: no info / Selon un sondage de 2018/2019, une majorité de Français est pour/contre une augmentation de la taxe carbone"
for (j in c("pour_taxe_carbone_pour", "pour_taxe_carbone_contre", "pour_taxe_carbone_neutre", "pour_taxe_carbone"
)) {
temp <- as.character(s[j][[1]])
temp[grepl('Non', temp)] <- 'Non'
temp[grepl('Oui', temp)] <- 'Oui'
s[j][[1]] <- as.item(temp,
labels = structure(c("Non","NSP","Oui"), names = c("Non","NSP","Oui")), missing.values = c("NSP"), annotation=attr(s[j][[1]], "label"))
}
for (j in c("chauffage", "parle_CC", "cause_CC_AT", "cause_CC_CCC", "effets_CC_AT", "issue_CC" # , "interet_politique"
)) {
if (j %in% c("chauffage", "cause_CC_AT")) s[capitalize(j)] <- s[j][[1]]
# s[j][[1]] <- as.item(as.character(s[j][[1]]),
#             labels = structure(levels(factor(s[j][[1]])), names = levels(factor(s[j][[1]]))),
#             missing.values = c("NSP", ""), annotation=paste(attr(s[j][[1]], "label"), "(char)"))
s[j][[1]] <- as.item(as.factor(s[j][[1]]), missing.values = c("NSP", ""), annotation=paste(attr(s[j][[1]], "label"), "(char)"))
}
for (j in names(s)) {
if ((grepl('gilets_jaunes_|ecologiste|conservateur|liberal|patriote|humaniste|apolitique|locataire|proprio_|heberge_|solution_CC_|responsable_|centre|droite|gauche', j)
| grepl('soutenu_|qualite_enfant_|^CCC_', j))
& !(j %in% c('CCC_autre')) & !grepl('CCC_devoile_', j)) {
temp <- label(s[[j]])
s[[j]] <- s[[j]]!="" # s[[j]][s[[j]]!=""] <- TRUE
s[[j]][is.na(s[[j]])] <- FALSE
label(s[[j]]) <- temp
}
}
for (k in c(55:60)) {
temp <-  3 * (s[k][[1]]=="Très souhaitable") + grepl("Assez", s[k][[1]]) - grepl("Pas vraiment", s[k][[1]]) - 3 * (s[k][[1]]=="Pas du tout souhaitable")
s[k][[1]] <- as.item(temp, labels = structure(c(-3,-1,1,3),
names = c("Pas du tout","Pas vraiment","Assez","Très")),
# names = c("Non, pas du tout","Non, pas vraiment","Indifférent ou Ne sais pas","Oui, plutôt","Oui, tout à fait")),
annotation=Label(s[k][[1]]))
}
for (k in c(141:148)) {
temp <-  2 * (s[k][[1]]=="Oui, tout à fait") + (s[k][[1]]=="Oui, plutôt") - (s[k][[1]]=="Non, pas vraiment") - 2 * (s[k][[1]]=="Non, pas du tout")
s[k][[1]] <- as.item(temp, labels = structure(c(-2:2),
names = c("Pas du tout","Pas vraiment","Indifférent/NSP","Plutôt","Tout à fait")),
# names = c("Non, pas du tout","Non, pas vraiment","Indifférent ou Ne sais pas","Oui, plutôt","Oui, tout à fait")),
annotation=Label(s[k][[1]]))
}
for (k in c(127:130)) {
temp1 <- -3*(s[k][[1]]=='Non, je suis sûr·e que non') - (s[k][[1]]=='Non, ça ne me dit rien') + (s[k][[1]]=='Oui, il me semble') + 3*(s[k][[1]]=="Oui, j'en suis sûr·e")
temp2 <- -3*(s[k+28][[1]]=='Non, je suis sûr·e que non') - (s[k+28][[1]]=='Non, ça ne me dit rien') + (s[k+28][[1]]=='Oui, il me semble') + 3*(s[k+28][[1]]=="Oui, j'en suis sûr·e")
temp[s$info_CCC==1] <- -3*(s[k][[1]][s$info_CCC==1]=='Non, je suis sûr·e que non') - (s[k][[1]][s$info_CCC==1]=='Non, ça ne me dit rien') + (s[k][[1]][s$info_CCC==1]=='Oui, il me semble') + 3*(s[k][[1]][s$info_CCC==1]=="Oui, j'en suis sûr·e")
temp[s$info_CCC==0] <- -3*(s[k+28][[1]][s$info_CCC==0]=='Non, je suis sûr·e que non') - (s[k+28][[1]][s$info_CCC==0]=='Non, ça ne me dit rien') + (s[k+28][[1]][s$info_CCC==0]=='Oui, il me semble') + 3*(s[k+28][[1]][s$info_CCC==0]=="Oui, j'en suis sûr·e")
s[k][[1]] <- as.item(temp1, labels=structure(c(-3, -1, 1, 3), names = c('Non, sûr', 'Non, me dit rien', 'Oui, me semble', 'Oui, sûr')), annotation=Label(s[k][[1]]))
s[k+28][[1]] <- as.item(temp2, labels=structure(c(-3, -1, 1, 3), names = c('Non, sûr', 'Non, me dit rien', 'Oui, me semble', 'Oui, sûr')), annotation=Label(s[k+28][[1]]))
s[[sub('_info_CCC', '', names(s)[k])]] <- as.item(temp, labels=structure(c(-3, -1, 1, 3), names = c('Non, sûr', 'Non, me dit rien', 'Oui, me semble', 'Oui, sûr')),
annotation=sub('\\(info_CCC==1\\)', '~ info_CCC', sub('_info_CCC', '', Label(s[k][[1]]))))
}
for (k in c(149:153)) {
temp <-  0.1 * (s[k][[1]]=="NSP") + (s[k][[1]]=="Oui") - (s[k][[1]]=="Non")
s[k][[1]] <- as.item(temp, labels = structure(c(0.1,-1:1), names = c("NSP","Non","Blanc","Oui")), missing.values=0.1, annotation=Label(s[k][[1]]))
}
temp[1:length(s$info_CCC)] <- 'Non'
temp[grepl('Oui', s$concentration_info_CCC) | grepl('Oui', s$concentration_no_info_CCC)] <- 'Oui'
s$concentration <- as.item(temp, labels=structure(c('Non', 'Oui'), names = c('Non', 'Oui,')), annotation=sub('\\(info_CCC==1\\)', '(info_CCC)', sub('_info_CCC', '', Label(s$concentration_info_CCC))))
temp[grepl('Ça dépend',s$trop_impots)] <- 'Ça dépend'
temp[!grepl('Ça dépend',s$trop_impots)] <- s$trop_impots[!grepl('Ça dépend',s$trop_impots)]
s$trop_impots <- as.item(as.character(temp), labels = structure(c("NSP", "Non","Ça dépend","Oui"), names = c("NSP","Non","Ça dépend","Oui")), missing.values = c("NSP"), annotation=attr(s$trop_impots, "label"))
temp <- (s$parle_CC=='Plusieurs fois par an') + 2*(s$parle_CC=='Plusieurs fois par mois') - (s$parle_CC=="NSP")
s$parle_CC <- as.item(temp, labels = structure(c(-1:2),
names = c("NSP","Presque jamais","Plusieurs fois par an","Plusieurs fois par mois")),
missing.values = -1, annotation=Label(s$parle_CC))
temp <- grepl("Faibles", s$effets_CC_AT) + 2*grepl("Graves", s$effets_CC_AT) + 3*grepl("Désastreux", s$effets_CC_AT) + 4*grepl("Cataclysmiques", s$effets_CC_AT) - (s$effets_CC_AT=="NSP")
s$effets_CC_AT <- as.item(temp, labels = structure(c(-1:4),
names = c("NSP","Insignifiants","Faibles","Graves","Désastreux","Cataclysmiques")),
# names = c("NSP","Insignifiants, voire bénéfiques","Faibles, car les humains sauraient vivre avec","Graves, car il y aurait plus de catastrophes naturelles","Désastreux, les modes de vie seraient largement altérés","Cataclysmiques, l'humanité disparaîtrait")),
missing.values = -1, annotation=Label(s$effets_CC_AT))
s$cause_CC_CCC <- relabel(s$cause_CC_CCC, c("Uniquement à des processus naturels"="Uniquement naturel", "Principalement à des processus naturels"="Principalement naturel", "Autant à des processus naturels qu'à l'activité humaine"="Autant",  "Principalement à l'activité humaine"="Principalement anthropique", "Uniquement à l'activité humaine"="Uniquement anthropique"))
temp <- grepl("Uniquement anthropique", s$cause_CC_CCC) - grepl("Autant", s$cause_CC_CCC) - 2*grepl("Principalement naturel", s$cause_CC_CCC) - 3*grepl("Uniquement naturel", s$cause_CC_CCC)
s$cause_CC_CCC <- as.item(temp, labels = structure(c(-3:1),
names = c("Uniquement naturel","Principalement naturel","Autant","Principalement anthropique","Uniquement anthropique")), annotation=Label(s$cause_CC_CCC))
temp <- -3*(s$problemes_invisibilises=='Jamais') - (s$problemes_invisibilises=='Peu souvent') + (s$problemes_invisibilises=='Assez souvent') + 3*(s$problemes_invisibilises=='Très souvent')
s$problemes_invisibilises <- as.item(temp, labels=structure(c(-3, -1, 1, 3), names = c('Jamais', 'Peu souvent', 'Assez souvent', 'Très souvent')), annotation=Label(s$problemes_invisibilises))
temp <- -3*(s$issue_CC=='Non, certainement pas') - (s$issue_CC=='Non, probablement pas') + (s$issue_CC=='Oui, probablement') + 3*(s$issue_CC=='Oui, certainement')
s$issue_CC <- as.item(temp, labels=structure(c(-3, -1, 1, 3), names = c('Non, certainement pas', 'Non, probablement pas', 'Oui, probablement', 'Oui, certainement')), annotation=Label(s$issue_CC))
temp <- -3*(s$confiance_sortition=='Pas du tout confiance') - (s$confiance_sortition=='Plutôt pas confiance') + (s$confiance_sortition=='Plutôt confiance') + 3*(s$confiance_sortition=='Tout à fait confiance')
s$confiance_sortition <- as.item(temp, labels=structure(c(-3, -1, 1, 3), names = c('Pas du tout confiance', 'Plutôt pas confiance', 'Plutôt confiance', 'Tout à fait confiance')), annotation=Label(s$confiance_sortition))
temp <- -2*(s$certitude_gagnant=='Je ne suis pas du tout sûr·e de ma réponse') - (s$certitude_gagnant=='Je ne suis pas vraiment sûr·e de ma réponse') + (s$certitude_gagnant=='Je suis sûr·e de ma réponse')
s$certitude_gagnant <- as.item(temp, labels=structure(c(-2:1), names = c('Pas du tout sûr', 'Pas vraiment sûr', 'Moyennement sûr', 'Sûr')), annotation=Label(s$certitude_gagnant))
temp <- -2*(s$certitude_gagnant_feedback=='Je ne suis pas du tout sûr·e de ma réponse') - (s$certitude_gagnant_feedback=='Je ne suis pas vraiment sûr·e de ma réponse') + (s$certitude_gagnant_feedback=='Je suis sûr·e de ma réponse')
s$certitude_gagnant_feedback <- as.item(temp, labels=structure(c(-2:1), names = c('Pas du tout sûr', 'Pas vraiment sûr', 'Moyennement sûr', 'Sûr')), annotation=Label(s$certitude_gagnant_feedback))
temp <- -2*grepl("Jamais", s$confiance_gouvernement) - grepl("Parfois", s$confiance_gouvernement) + grepl("La plupart", s$confiance_gouvernement) + 2*grepl("Toujours", s$confiance_gouvernement) + 0.1*grepl("NSP", s$confiance_gouvernement)
s$confiance_gouvernement <- as.item(temp, labels=structure(c(-2:2,0.1), names = c('Jamais', 'Parfois', 'Moitié du temps', 'Plupart du temps', 'Toujours', 'NSP')), missing.values=0.1, annotation=Label(s$confiance_gouvernement))
temp <- 1*(s$confiance_dividende=='Oui') - 1*(s$confiance_dividende=='Non')
s$confiance_dividende <- as.item(temp, labels=structure(c(-1:1), names=c('Non', 'À moitié', 'Oui')), annotation=Label(s$confiance_dividende))
temp <- - grepl("Non", s$connait_CCC) + grepl("Oui, je sais assez", s$connait_CCC) + 2*grepl("Oui, je sais très bien", s$connait_CCC)
s$connait_CCC <- as.item(temp, labels=structure(c(-1:2), names = c('Non', 'Vaguement', 'Oui, assez', 'Oui, très')), annotation=Label(s$connait_CCC))
temp <- - grepl("Aucune", s$sait_CCC_devoilee) + grepl("Oui", s$sait_CCC_devoilee)
is.na(temp) <- is.na(s$sait_CCC_devoilee)
s$sait_CCC_devoilee <- as.item(temp, labels=structure(c(-1:1), names = c('Non', 'Pas sûr', 'Oui')), annotation=Label(s$sait_CCC_devoilee))
s$question_confiance <- s$question_confiance > 0
s$avant_modifs <- s$avant_modifs != 2
s$duree_info_CCC[s$avant_modifs==T] <- NA # /!\ comment these two lines to see the duration avant_modifs, when info CCC & concentration were on the same page
s$variante_efforts_vous[s$avant_modifs==T] <- 0
temp <- s$efforts_relatifs
s$efforts_relatifs[temp=='Un peu moins' & s$variante_efforts_vous==0] <- 'Un peu plus'
s$efforts_relatifs[temp=='Un peu plus' & s$variante_efforts_vous==0] <- 'Un peu moins'
s$efforts_relatifs[temp=='Beaucoup moins' & s$variante_efforts_vous==0] <- 'Beaucoup plus'
s$efforts_relatifs[temp=='Beaucoup plus' & s$variante_efforts_vous==0] <- 'Beaucoup moins'
temp <- -2*(s$efforts_relatifs=='Beaucoup moins') - (s$efforts_relatifs=='Un peu moins') + 2*(s$efforts_relatifs=='Beaucoup plus') + 1*(s$efforts_relatifs=='Un peu plus')
s$efforts_relatifs <- as.item(temp, labels=structure(c(-2:2), names = c('Beaucoup moins', 'Un peu moins', 'Autant', 'Un peu plus', 'Beaucoup plus')), annotation=Label(s$efforts_relatifs))
temp <- 20.90*(s$age == "18 à 24 ans") + 29.61*(s$age == "25 à 34 ans") + 42.14*(s$age == "35 à 49 ans") + 56.84*(s$age == "50 à 64 ans") + 75.43*(s$age == "65 ans ou plus")
s$age <- as.item(temp, labels = structure(c(20.90, 29.61, 42.14, 56.84, 75.43), names = c("18-24", "25-34", "35-49", "50-64", "65+")), annotation=Label(s$age))
# s$Age <- (s$age == "18 à 24 ans") + 2*(s$age == "25 à 34 ans") + 3.3*(s$age == "35 à 49 ans") + 4.6*(s$age == "50 à 64 ans") + 7*(s$age == "65 ans ou plus")
s$taille_agglo <- as.numeric(sub('CC ', '', s$taille_agglo))
s$taille_agglo <- as.item(as.numeric(s$taille_agglo), labels = structure(1:5, names = c("rural", "-20k", "20-100k", "+100k", "Paris")), annotation=Label(s$taille_agglo))
temp <- 1*grepl('10 001', s$patrimoine) + 2*grepl('60 001', s$patrimoine) + 3*grepl('180 001', s$patrimoine) + 4*grepl('350 001', s$patrimoine) + 5*grepl('Plus de', s$patrimoine) - 1*grepl('NSP', s$patrimoine)
s$patrimoine <- as.item(as.numeric(temp), missing.values=-1, labels = structure(-1:5, names = c("NSP", "< 10k", "10-60k", "60-180k", "180-350k", "350-550k", "> 550k")), annotation=Label(s$patrimoine))
s$Diplome <- (s$diplome == "Brevet des collèges") + 2*(s$diplome=="CAP ou BEP") + 3*(s$diplome=="Baccalauréat") + 4*(s$diplome=="Bac +2 (BTS, DUT, DEUG, écoles de formation sanitaires et sociales...)") + 5*(s$diplome=="Bac +3 (licence...)") + 6*(s$diplome=="Bac +5 ou plus (master, école d'ingénieur ou de commerce, doctorat, médecine, maîtrise, DEA, DESS...)") - (s$diplome=="NSP (Ne se prononce pas)")
s$diplome4 <- as.item(pmin(pmax(s$Diplome, 1), 4), labels = structure(1:4, names = c("Aucun diplôme ou brevet", "CAP ou BEP", "Baccalauréat", "Supérieur")), annotation=Label(s$diplome))
s$chauffage <- relabel(s$chauffage, c("Gaz de ville"="Gaz réseau", "Butane, propane, gaz en citerne"="Gaz bouteille", "Fioul, mazout, pétrole"="Fioul", "Électricité"="Électricité", "Bois, solaire, géothermie, aérothermie (pompe à chaleur)"="Bois, solaire...", "Autre"="Autre", "NSP"="NSP"))
s$cause_CC_AT <- relabel(s$cause_CC_AT, c("n'est pas une réalité"="n'existe pas", "est principalement dû à la variabilité naturelle du climat"="naturel", "est principalement dû à l'activité humaine"="anthropique", "NSP"="NSP"))
s$confiance_gens <- relabel(s$confiance_gens, c("On n’est jamais assez prudent quand on a affaire aux autres"="Confiant", "On n’est jamais assez prudent quand on a affaire aux autres"="Méfiant"))
s$gauche_droite <- pmax(-2,pmin(2,-2 * s$extr_gauche - 1*s$gauche + 1*s$droite + 2 * s$extr_droite))
is.na(s$gauche_droite) <- (s$gauche_droite == 0) & !s$centre
s$Gauche_droite <- as.factor(s$gauche_droite)
s$gauche_droite <- as.item(as.numeric(as.vector(s$gauche_droite)), labels = structure(c(-2:2),
names = c("Extrême gauche","Gauche","Centre","Droite","Extrême droite")), annotation="gauche_droite:échelle de -2 (extr_gauche) à +2 (extr_droite) - Orientation politique (Comment vous définiriez-vous ? Plusieurs réponses possibles: (D'extrême) gauche/Du centre/(D'extrême) droite/Libéral/Humaniste/Patriote/Apolitique/Écologiste/Conservateur (champ libre)/NSP)")
levels(s$Gauche_droite) <- c("Extreme-left", "Left", "Center", "Right", "Extreme-right", "Indeterminate")
s$Gauche_droite[is.na(s$Gauche_droite)] <- "Indeterminate"
s$indeterminate <- s$Gauche_droite == "Indeterminate"
temp <- Label(s$interet_politique)
s$interet_politique <- 1*(s$interet_politique=='Un peu') + 2*(s$interet_politique=='Beaucoup')
s$interet_politique <- as.item(s$interet_politique, labels=structure(c(0:2), names=c('Presque pas', 'Un peu', 'Beaucoup')), annotation=temp)
s$gilets_jaunes[s$gilets_jaunes_NSP==T] <- -0.1
s$gilets_jaunes[s$gilets_jaunes_compris==T] <- 0 # total à 115%
s$gilets_jaunes[s$gilets_jaunes_oppose==T] <- -1 # 2 oppose et soutien en même temps
s$gilets_jaunes[s$gilets_jaunes_soutien==T] <- 1
s$gilets_jaunes[s$gilets_jaunes_dedans==T] <- 2
s$gilets_jaunes <- as.item(s$gilets_jaunes, missing.values=-0.1, labels = structure(c(-0.1,-1:2), names=c('NSP', 'oppose', 'comprend', 'soutient', 'est_dedans')),
annotation="gilets_jaunes: -1: s'oppose / 0: comprend sans soutenir ni s'opposer / 1: soutient / 2: fait partie des gilets jaunes (gilets_jaunes_compris/oppose/soutien/dedans/NSP)" )
s$Gilets_jaunes <- as.factor(as.character(s$gilets_jaunes))
s$Gilets_jaunes <- relevel(s$Gilets_jaunes, 'soutient')
s$Gilets_jaunes <- relevel(s$Gilets_jaunes, 'comprend')
s$Gilets_jaunes <- relevel(s$Gilets_jaunes, 'NSP')
s$Gilets_jaunes <- relevel(s$Gilets_jaunes, 'oppose')
s$revenu_conjoint <- s$rev_tot - s$revenu
s$revdisp <- round((s$rev_tot -  irpp(s$rev_tot, s$nb_adultes, s$taille_menage)))
s$uc <- uc(s$taille_menage, s$nb_14_et_plus)
s$niveau_vie <- s$revdisp / s$uc
region_code <- function(code) {
reg <- "autre"
regions <- list(
"ARA" = c('01', '03', '07', '15', '26', '38', '42', '43', '63', '69', '73', '74'),
"Est" = c('21', '25', '39', '58', '70', '71', '89', '90', '08', '10', '51', '52', '54', '55', '57', '67', '68', '88'),
"Ouest" = c('22', '29', '35', '56', '14', '27', '50', '61', '76' ),
"Centre" = c('18', '28', '36', '37', '41', '45', '44', '49', '53', '72', '85'),
"Nord" = c('02', '59', '60', '62', '80'),
"IDF" = c('75', '77', '78', '91', '92', '93', '94', '95'),
"SO" = c('16', '17', '19', '23', '24', '33', '40', '47', '64', '79', '86', '87'),
"Occ" = c('09', '11', '12', '30', '31', '32', '34', '46', '48', '65', '66', '81', '82'),
"PACA" = c( '04', '05', '06', '13', '83', '84')
)
for (i in 1:9) if (as.numeric(code) %in% as.numeric(regions[[i]])) reg <- names(regions)[i]
return(reg)
}
region_dep <- rep("", 95)
for (i in 1:95) region_dep[i] <- region_code(i)
s$region_verif <- "autre"
s$region_verif[as.numeric(substr(s$code_postal, 1, 2)) %in% 1:95] <- region_dep[as.numeric(substr(s$code_postal, 1, 2))]
s$nb_vehicules_verif <- (s$nb_vehicules_texte=='Un') + 2*(s$nb_vehicules_texte=='Deux ou plus')
s$perte <- 1 + round(as.numeric(gsub("\\D*", "", sub("\\set.*", "", sub("\\D*", "", s$hausse_depenses_subjective))))/45)
s$perte[grepl('au contraire', s$hausse_depenses_subjective)] <- -1
s$perte[grepl('aucune baisse', s$hausse_depenses_subjective)] <- 0
label(s$perte) <- "perte: Catégorie de hausse_depenses_subjective par UC, suite à hausse taxe carbone compensée, dans [-1;5] (seuils: 0/1/30/70/120/190)"
s$perte_echelle <- s$perte
label(s$perte) <- "perte: Catégorie de hausse_depenses_subjective (€ par UC par an), suite à hausse taxe carbone compensée, dans [-1;5] (seuils: 0/1/30/70/120/190)"
# cf. consistency_belief_losses.py pour les imputations. Average of BdF in each bin has been used.
s$perte_min <- -30*(s$perte==-1) + 1*(s$perte==1) + 30*(s$perte==2) + 70*(s$perte==3) + 120*(s$perte==4) + 190*(s$perte==5)
s$perte_max <-   0*(s$perte==-1) + 30*(s$perte==1) + 70*(s$perte==2) + 120*(s$perte==3) + 190*(s$perte==4) + 2000*(s$perte==5)
temp <- 224.25*(s$perte==5) + 147.91*(s$perte==4) + 92.83*(s$perte==3) + 48.28*(s$perte==2) + 13.72*(s$perte==1) - 1.66*(s$perte==-1) # TODO: recalculer, surtout perte==5 (qui correspond à [190;280] au lieu de >190) et perte==-1 (ne sait pas d'où il sort). Pour info 405.55*(perte==6)
s$perte <- as.item(temp, labels = structure(c(224.25, 147.91, 92.83, 48.28, 13.72, 0, -1.66), names = c(">190", "120-190", "70-120", "30-70", "0-30", "0", "<0")), annotation=Label(s$perte))
s$km[!is.na(s$km_0)] <- s$km_0[!is.na(s$km_0)]
s$km[!is.na(s$km_1)] <- s$km_1[!is.na(s$km_1)]
s$km[!is.na(s$km_2)] <- s$km_2[!is.na(s$km_2)]
label(s$km) <- "km: Nombre de kilomètres parcourus lors des 12 derniers mois en voiture ou moto (par le répondant pour nb_vehicules=0, par les véhicules sinon)"
s$conso[!is.na(s$conso_1)] <- s$conso_1[!is.na(s$conso_1)]
s$conso[!is.na(s$conso_2)] <- s$conso_2[!is.na(s$conso_2)]
s$conso[is.na(s$conso)] <- (6.39 + 7.31) / 2
label(s$conso) <- "conso:  Consommation moyenne du véhicule (en litres aux 100 km)"
# s$mauvaise_qualite[s$conso > 90] <- 1 + s$mauvaise_qualite[s$conso > 90] # 28
s$km_original <- s$km
s$conso_original <- s$conso
s$surface_original <- s$surface
s$km <- pmin(s$km, 200000) # 4
s$conso <- pmin(s$conso, 30) # 75
s$surface <- pmin(s$surface, 650) # 5
#   s$gaz <- grepl('gaz', s$chauffage, ignore.case = T)
#   s$fioul <- grepl('fioul', s$chauffage, ignore.case = T)
#   s$hausse_chauffage <- -55.507189 + s$gaz * 124.578484 + s$fioul * 221.145441 + s$surface * 0.652174
# 	s$hausse_diesel[s$nb_vehicules == 0] <- (0.5*(6.39/100) * s$km * 1.4 * (1 - 0.4) * 0.090922)[s$nb_vehicules == 0] # share_diesel * conso * km * price * (1-elasticite) * price_increase
# 	s$hausse_diesel[s$nb_vehicules == 1] <- ((s$fuel_1=='Diesel') * (s$conso/100) * s$km * 1.4 * (1 - 0.4) * 0.090922)[s$nb_vehicules == 1]
#   s$hausse_diesel[s$nb_vehicules == 2] <- (((s$fuel_2_1=='Diesel')*2/3 + (s$fuel_2_2=='Diesel')/3) * (s$conso/100) * s$km * 1.4 * (1 - 0.4) * 0.090922)[s$nb_vehicules == 2]
# 	s$hausse_essence[s$nb_vehicules == 0] <- (0.5*(7.31/100) * s$km * 1.45 * (1 - 0.4) * 0.076128)[s$nb_vehicules == 0] # share_diesel * conso * km * price * (1-elasticite) * price_increase
# 	s$hausse_essence[s$nb_vehicules == 1] <- ((s$fuel_1!='Diesel') * (s$conso/100) * s$km * 1.45 * (1 - 0.4) * 0.076128)[s$nb_vehicules == 1]
#   s$hausse_essence[s$nb_vehicules == 2] <- (((s$fuel_2_1!='Diesel')*2/3 + (s$fuel_2_2!='Diesel')/3) * (s$conso/100) * s$km * 1.45 * (1 - 0.4) * 0.076128)[s$nb_vehicules == 2]
#   s$hausse_carburants <- s$hausse_diesel + s$hausse_essence
#   s$depense_carburants <- (s$hausse_diesel / 0.090922 + s$hausse_essence / 0.076128) / (1 - 0.4)
#   label(s$hausse_carburants) <- "hausse_carburant: Hausse des dépenses de carburants simulées pour le ménage, suite à la taxe (élasticité de 0.4) (hausse_diesel + hausse_essence)"
#   label(s$depense_carburants) <- "depense_carburants: Dépense de carburants annuelle estimée du ménage, avant la réforme"
#   s$hausse_depenses <- s$hausse_carburants + s$hausse_chauffage
s$diesel <- (!is.na(s$fuel_1) & (s$fuel_1=='Diesel')) | (!is.na(s$fuel_2_2) & ((s$fuel_2_1=='Diesel') | (s$fuel_2_2=='Diesel')))
s$essence <- (!is.na(s$fuel_1) & (s$fuel_1=='Essence')) | (!is.na(s$fuel_2_2) & ((s$fuel_2_1=='Essence') | (s$fuel_2_2=='Essence')))
label(s$diesel) <- "diesel: Indicatrice de la possession d'un véhicule diesel par le ménage (fuel_1 ou fuel_2_1 ou fuel_2_2 = 'Diesel')"
label(s$essence) <- "essence: Indicatrice de la possession d'un véhicule à essence par le ménage (fuel_1 ou fuel_2_1 ou fuel_2_2 = 'Essence')"
s$simule_gain_menage <- 16.1 + pmin(2, s$nb_adultes) * 110 - s$hausse_depenses # élasticité de 0.15 sur le gaz
s$simule_gain <- s$simule_gain_menage / s$uc
s$simule_gain_repondant <- 16.1 + 110 - s$hausse_depenses
label(s$simule_gain_menage) <- "simule_gain_menage: Gain net annuel simulé pour le ménage du répondant suite à une hausse de taxe carbone compensée: 16.1 + pmin(2, nb_adultes) * 110 - hausse_depenses"
label(s$simule_gain) <- "simule_gain: Gain net annuel simulé par UC pour le ménage du répondant suite à une hausse de taxe carbone compensée: (16.1 + pmin(2, nb_adultes) * 110 - hausse_depenses)/UC"
label(s$simule_gain_repondant) <- "simule_gain_repondant: Gain net annuel simulé pour le répondant (sans tenir compte du potentiel versement reçu par les autres adultes du ménage) suite à une hausse de taxe carbone compensée: 116.1 - hausse_depenses"
# s$hausse_chauffage_interaction_inelastique <- 152.6786*s$fioul + s$surface * (1.6765*s$gaz + 1.1116*s$fioul)
# s$depense_chauffage <- ((1*(s$fioul) * (152.6786 + 1.1116*s$surface)) / 0.148079 + 1.6765*s$gaz*s$surface / 0.133456)
# s$hausse_depenses_interaction <- s$hausse_carburants + s$hausse_chauffage_interaction_inelastique * (1 - 0.2)
# s$hausse_depenses_interaction_inelastique <- s$hausse_carburants/(1 - 0.4) + s$hausse_chauffage_interaction_inelastique
# s$simule_gain_interaction <- (9.1 + pmin(2, s$nb_adultes) * 110 - s$hausse_depenses_interaction) / s$uc # élasticité de 0.2 pour le gaz
# s$simule_gagnant_interaction <- 1*(s$simule_gain_interaction > 0)
# s$simule_gain_inelastique <- (pmin(2, s$nb_adultes) * 110 - s$hausse_depenses_interaction_inelastique) / s$uc # élasticité nulle. Inclure + 22.4 rendrait le taux d'erreur uniforme suivant les deux catégories, on ne le fait pas pour être volontairement conservateur
# s$simule_gain_cible_interaction <- (s$versement_cible - s$hausse_depenses_interaction) / s$uc
# s$simule_gain_cible_interaction_inelastique <- (s$versement_cible - s$hausse_depenses_interaction_inelastique) / s$uc
# s$simule_gain_elast_perso[s$variante_partielle=='c'] <- (pmin(2, s$nb_adultes[s$variante_partielle=='c']) * 110 - (s$hausse_chauffage_interaction_inelastique[s$variante_partielle=='c'] * (1 + s$Elasticite_chauffage_perso[s$variante_partielle=='c']) + s$hausse_carburants[s$variante_partielle=='c'])) / s$uc[s$variante_partielle=='c']
# s$simule_gain_elast_perso[s$variante_partielle=='f'] <- (pmin(2, s$nb_adultes[s$variante_partielle=='f']) * 110 - (s$hausse_carburants[s$variante_partielle=='f'] * (1 + s$Elasticite_fuel_perso[s$variante_partielle=='f']) / (1 - 0.4) + s$hausse_chauffage_interaction_inelastique[s$variante_partielle=='f'] * (1 - 0.2))) / s$uc[s$variante_partielle=='f']
# label(s$hausse_chauffage_interaction_inelastique) <- "hausse_chauffage_interaction_inelastique: Hausse des dépenses de chauffage simulées pour le ménage avec des termes d'interaction entre surface et gaz/fioul plutôt que sans, suite à la taxe (élasticité nulle)"
# label(s$depense_chauffage) <- "depense_chauffage: Dépense de chauffage annuelle estimée du ménage, avant la réforme"
# label(s$simule_gain_interaction) <- "simule_gain_interaction: Gain net par UC annuel simulé avec des termes d'interaction surface*fioul/gaz pour le ménage du répondant suite à une hausse de taxe carbone compensée: 9.1 + pmin(2, nb_adultes) * 110 - hausse_chauffage_interaction_inelastique * 0.8 - hausse_carburants"
# label(s$simule_gagnant_interaction) <- "simule_gagnant_interaction: Indicatrice sur la prédiction que le ménage serait gagnant avec la taxe compensée, d'après nos simulations avec des termes d'interaction surface*fioul/gaz: 1*(simule_gain_interaction > 0)"
# label(s$simule_gain_inelastique) <- "simule_gain_inelastique: Gain net par UC annuel simulé (avec interaction) avec une élasticité nulle, pour le ménage du répondant suite à une hausse de taxe carbone compensée:  nb_adultes * 110 - hausse_chauffage_interaction_inelastique - hausse_carburants / 0.6"
# label(s$simule_gain_elast_perso) <- "simule_gain_elast_perso: Gain net par UC annuel simulé (avec interaction) avec l'élasticité renseignée par le répondant, pour le ménage du répondant suite à une hausse de taxe carbone compensée: pmin(2, nb_adultes) * 110 - hausse_partielle_inelastique * (1 - Elasticite_partielle_perso) - hausse_autre_partielle"
# label(s$hausse_depenses_interaction) <- "hausse_depenses_interaction: Hausse des dépenses énergétiques simulées pour le ménage avec les termes d'interaction, suite à la taxe (élasticité de 0.4/0.2 pour carburants/chauffage)"
# label(s$hausse_depenses_interaction_inelastique) <- "hausse_depenses_interaction_inelastique: Hausse des dépenses énergétiques simulées pour le ménage avec les termes d'interaction, suite à la taxe (élasticité nulle)"
# label(s$simule_gain_cible_interaction) <- "simule_gain_cible_interaction: Gain net par UC annuel simulé avec des termes d'interaction surface*fioul/gaz pour le ménage du répondant suite à une hausse de taxe carbone avec compensation ciblée: versement_cible - hausse_depenses_interaction) / uc"
# label(s$simule_gain_cible_interaction_inelastique) <- "simule_gain_cible_interaction_inelastique: Gain net par UC annuel simulé avec des termes d'interaction surface*fioul/gaz pour le ménage du répondant suite à une hausse de taxe carbone avec compensation ciblée: versement_cible - hausse_depenses_interaction_inelastique) / uc"
s$age_18_24 <- 1*(s$age == '18-24')
s$age_25_34 <- 1*(s$age == '25-34')
s$age_35_49 <- 1*(s$age == '35-49')
s$age_50_64 <- 1*(s$age == '50-64')
s$age_65_plus <- 1*(s$age == '65+')
s$tax_approval <- s$taxe_approbation=='Oui'
s$tax_acceptance <- s$taxe_approbation!='Non'
label(s$tax_approval) <- "tax_approval: Approbation initiale de la hausse de la taxe carbone compensée: taxe_approbation=='Oui'"
label(s$tax_acceptance) <- "tax_acceptance: Acceptation initiale de la hausse de la taxe carbone compensée: taxe_approbation!='Non'"
s$tax_feedback_approval <- s$taxe_feedback_approbation=='Oui'
s$tax_feedback_acceptance <- s$taxe_feedback_approbation!='Non'
label(s$tax_feedback_approval) <- "tax_feedback_approval: Approbation après le feedback de la hausse de la taxe carbone compensée: taxe_feedback_approbation=='Oui'"
label(s$tax_feedback_acceptance) <- "tax_feedback_acceptance: Acceptation après le feedback de la hausse de la taxe carbone compensée: taxe_feedback_approbation!='Non'"
s$update_correct <- ((s$simule_gagnant==1 & s$gagnant_feedback_categorie=='Gagnant' & s$gagnant_categorie!='Gagnant')
+ (s$simule_gagnant==0 & s$gagnant_feedback_categorie=='Perdant' & s$gagnant_categorie!='Perdant')
- (s$simule_gagnant==1 & s$gagnant_feedback_categorie=='Perdant' & s$gagnant_categorie!='Perdant')
- (s$simule_gagnant==0 & s$gagnant_feedback_categorie=='Gagnant' & s$gagnant_categorie!='Gagnant'))
label(s$update_correct) <- "update_correct: Différence entre l'indicatrice de ne pas se penser gagnant/perdant et le penser après feedback infirmant, moins la même après feedback confirmant"
s$update_correct_large <- ((s$simule_gagnant==1 & ((s$gagnant_feedback_categorie=='Gagnant' & s$gagnant_categorie!='Gagnant') | (s$gagnant_feedback_categorie!='Perdant' & s$gagnant_categorie=='Perdant')))
+ (s$simule_gagnant==0 & ((s$gagnant_feedback_categorie=='Perdant' & s$gagnant_categorie!='Perdant') | (s$gagnant_feedback_categorie!='Gagnant' & s$gagnant_categorie=='Gagnant')))
- (s$simule_gagnant==1 & ((s$gagnant_feedback_categorie=='Perdant' & s$gagnant_categorie!='Perdant') | (s$gagnant_feedback_categorie!='Gagnant' & s$gagnant_categorie=='Gagnant')))
- (s$simule_gagnant==0 & ((s$gagnant_feedback_categorie=='Gagnant' & s$gagnant_categorie!='Gagnant') | (s$gagnant_feedback_categorie!='Perdant' & s$gagnant_categorie=='Perdant'))))
label(s$update_correct_large) <- "update_correct_large: Différence entre faire un update dans la bonne direction quand le feedback y conduit et faire un update dans la mauvaise direction"
s$feedback_confirme <- (s$gagnant_categorie=='Gagnant' & s$simule_gagnant==1) | (s$gagnant_categorie=='Perdant' & s$simule_gagnant==0)
s$feedback_infirme <- (s$gagnant_categorie=='Perdant' & s$simule_gagnant==1) | (s$gagnant_categorie=='Gagnant' & s$simule_gagnant==0)
s$feedback_confirme_large <- s$feedback_confirme | (s$gagnant_categorie!='Perdant' & s$simule_gagnant==1) | (s$gagnant_categorie!='Gagnant' & s$simule_gagnant==0)
s$feedback_infirme_large <- s$feedback_infirme | (s$gagnant_categorie!='Perdant' & s$simule_gagnant==0) | (s$gagnant_categorie!='Gagnant' & s$simule_gagnant==1)
label(s$feedback_confirme) <- "feedback_confirme: Indicatrice de se penser et être simulé gagnant/perdant (gagnant_categorie, simule_gagnant)"
label(s$feedback_infirme) <- "feedback_infirme: Indicatrice de se penser gagnant et être simulé perdant, ou l'inverse (gagnant_categorie, simule_gagnant)"
label(s$feedback_confirme_large) <- "feedback_confirme_large: Indicatrice de se penser non perdant et être simulé gagnant, ou de se penser non gagnant et être simulé perdant (gagnant_categorie, simule_gagnant)"
label(s$feedback_infirme_large) <- "feedback_infirme_large: Indicatrice de se penser non gagnant et être simulé gagnant, ou de se penser non perdant et être simulé perdant (gagnant_categorie, simule_gagnant)"
s$winning_category <- as.factor(s$gagnant_categorie)
s$winning_feedback_category <- as.factor(s$gagnant_feedback_categorie)
levels(s$winning_category) <- c('Winner', 'Unaffected', 'Loser')
levels(s$winning_feedback_category) <- c('Winner', 'Unaffected', 'Loser')
label(s$winning_category) <- "Winning category before feedback"
label(s$winning_feedback_category) <- "Winning category after feedback"
s$Revenu <- s$revenu/1e3 # TODO: labels
s$Revenu_conjoint <- s$revenu_conjoint/1e3
s$percentile_revenu <- 100*percentiles_revenu(s$revenu*12)
s$percentile_revenu_conjoint  <- 100*percentiles_revenu(s$revenu_conjoint*12)
s$Simule_gain <- s$simule_gain/1e3
s$Revenu2 <- s$revenu^2/1e6
s$Revenu_conjoint2 <- s$revenu_conjoint^2/1e6
s$Simule_gain2 <- s$simule_gain^2/1e6
# s$biais_sur <- abs(s$simule_gain - s$gain) > 110
# label(s$biais_sur) <- "biais_sur: Certitude à 99% que le gain subjectif du répondant est biaisé à la baisse: abs(simule_gain - gain) > 110"
s$origine_taxe <- relevel(as.factor(s$origine_taxe), 'inconnue')
s$label_taxe <- relevel(as.factor(s$label_taxe), 'taxe')
s$variante_taxe_carbone <- relevel(as.factor(s$variante_taxe_carbone), 'neutre')
s$retraites <- s$statut_emploi == 'retraité·e'
s$actifs <- s$statut_emploi %in% c("autre actif", "CDD", "CDI", "fonctionnaire", "intérimaire ou contrat précaire")
s$etudiants <- s$statut_emploi == 'étudiant·e'
s$inactif <- s$statut_emploi %in% c("inactif", "au chômage")
label(s$retraites) <- "retraites: statut_emploi == 'retraité·e'"
label(s$actifs) <- 'actifs: statut_emploi %in% c("autre actif", "CDD", "CDI", "fonctionnaire", "intérimaire ou contrat précaire")'
label(s$etudiants) <- "etudiants: statut_emploi == 'étudiant·e'"
label(s$inactif) <- 'inactif: statut_emploi %in% c("inactif", "au chômage")'
s$single <- 1*(s$nb_adultes==1)
label(s$single) <- "single: nb_adultes == 1"
s$hausse_depenses_par_uc <- s$hausse_depenses/s$uc # TODO: hausse_depenses_interaction_par_uc
label(s$hausse_depenses_par_uc) <- "hausse_depenses_par_uc: Hausse des dépenses énergétiques par UC suite à la taxe (élasticité de 0.4/0.2 pour carburants/chauffage)"
# s$nb_politiques_env <- 0
# variables_politiques_environnementales <- c("taxe_kerosene", "taxe_viande", "normes_isolation", "normes_vehicules", "controle_technique", "interdiction_polluants",
#                                             "peages_urbains", "fonds_mondial") # "rattrapage_diesel"
# for (v in variables_politiques_environnementales) s$nb_politiques_env[s[[v]]>0] <- 1 + s$nb_politiques_env[s[[v]]>0]
variables_politiques_1 <<- c("fin_gaspillage", "cantines_vertes", "voies_reservees", "densification", "renouvelables", "taxe_distance") # 6
variables_politiques_2 <<- c("bonus_malus", "aides_train", "fonds_mondial", "taxe_viande", "conditionner_aides", "restriction_centre_ville", "limitation_110", "obligation_renovation") # 8
variables_referendum <<- c("obligation_renovation", "cheque_bio", "interdiction_publicite", "interdiction_polluants", "taxe_dividendes", "consigne") # 6
variables_politiques_env <<- c(variables_politiques_1, variables_politiques_2, variables_referendum) # 20
s$nb_referenda <- s$nb_politiques_2 <- s$nb_politiques_1 <- 0
for (v in variables_referendum) s$nb_referenda[s[[paste('referendum', v, sep='_')]]>0] <- 1 + s$nb_referenda[s[[paste('referendum', v, sep='_')]]>0]
for (v in variables_politiques_2) s$nb_politiques_2[s[[paste('pour', v, sep='_')]]>0] <- 1 + s$nb_politiques_2[s[[paste('pour', v, sep='_')]]>0]
for (v in variables_politiques_1) s$nb_politiques_1[s[[paste('pour', v, sep='_')]]>0] <- 1 + s$nb_politiques_1[s[[paste('pour', v, sep='_')]]>0]
s$nb_referenda_politiques_2 <- s$nb_referenda + s$nb_politiques_2
s$nb_politiques_env <- s$nb_referenda + s$nb_politiques_1 # TODO: add carbon tax
s$prop_referenda <- s$nb_referenda / 6
s$prop_politiques_1 <- s$nb_politiques_1 / 6
s$prop_politiques_2 <- s$nb_politiques_2 / 8
s$prop_referenda_politiques_2 <- s$nb_referenda_politiques_2 / 14
s$prop_politiques_env <- s$nb_politiques_env / 20
label(s$nb_referenda) <- "nb_referenda: Nombre de referendum_ où le répondant voterait Oui (cf. les 6 variables_referendum) ~ info_CCC"
label(s$nb_politiques_1) <- "nb_politiques_1: Nombre de politiques environnementales de la 1ère partie soutenues par le répondant (cf. les 6 variables_politiques_1)"
label(s$nb_politiques_2) <- "nb_politiques_2: Nombre de politiques environnementales de la 2è partie soutenues par le répondant (cf. les 6 variables_politiques_2) ~ info_CCC"
label(s$nb_politiques_env) <- "nb_politiques_env: Nombre de politiques environnementales soutenues par le répondant = nb_referenda + nb_politiques_1 + nb_politiques_2 (cf. les 20 variables_politiques_env)"
label(s$nb_referenda_politiques_2) <- "nb_referenda_politiques_2: Nombre de politiques environnementales de la 2è partie soutenues par le répondant = nb_referenda + nb_politiques_2 (cf. les 14 variables_politiques_2 et variables_referendum)"
label(s$prop_referenda) <- "prop_referenda: Proportion de referendum_ où le répondant voterait Oui (cf. les 6 variables_referendum) ~ info_CCC"
label(s$prop_politiques_1) <- "prop_politiques_1: Proportion de politiques environnementales de la 1ère partie soutenues par le répondant (cf. les 6 variables_politiques_1)"
label(s$prop_politiques_2) <- "prop_politiques_2: Proportion de politiques environnementales de la 2è partie soutenues par le répondant (cf. les 6 variables_politiques_2) ~ info_CCC"
label(s$prop_politiques_env) <- "prop_politiques_env: Proportion de politiques environnementales soutenues par le répondant = prop_referenda + prop_politiques_1 + prop_politiques_2 (cf. les 20 variables_politiques_env)"
label(s$prop_referenda_politiques_2) <- "prop_referenda_politiques_2: Proportion de politiques environnementales de la 2è partie soutenues par le répondant = nb_referenda + nb_politiques_2 (cf. les 14 variables_politiques_2 et variables_referendum)"
s$correct_soutenu_bonus_malus <- s$soutenu_bonus_malus==T # ~65% pour
s$correct_soutenu_normes_isolation <- s$soutenu_normes_isolation==T # AT: 72% pour
s$correct_soutenu_obligation_renovation <- s$soutenu_obligation_renovation==T # referendum_obligation_renovation: ~75% Oui / pour_obligation_renovation: ~83% pour
s$correct_soutenu_limitation_110 <- s$soutenu_limitation_110==F # pour_limitation_110: ~53% contre
s$nb_correct_soutenu <- s$correct_soutenu_bonus_malus + s$correct_soutenu_normes_isolation + s$correct_soutenu_obligation_renovation + s$correct_soutenu_limitation_110
label(s$correct_soutenu_bonus_malus) <- "correct_soutenu_bonus_malus: soutenu_bonus_malus==T - Un renforcement du bonus/malus écologique pour l’achat d’un véhicule - Réponse correcte à si cette politique est soutenue par une majorité de Français (obligation_renovation/normes_isolation/bonus_malus/limitation_110)"
label(s$correct_soutenu_obligation_renovation) <- "correct_soutenu_obligation_renovation: soutenu_obligation_renovation==T - L'obligation de rénovation thermique des logements les moins bien isolés assortie d'aides de l'État - Réponse correcte à si cette politique est soutenue par une majorité de Français (obligation_renovation/normes_isolation/bonus_malus/limitation_110)"
label(s$correct_soutenu_limitation_110) <- "correct_soutenu_limitation_110: soutenu_limitation_110==F - L'abaissement de la limitation de vitesse sur les autoroutes à 110 km/h - Réponse correcte à si cette politique est soutenue par une majorité de Français (obligation_renovation/normes_isolation/bonus_malus/limitation_110)"
label(s$correct_soutenu_normes_isolation) <- "correct_soutenu_normes_isolation: soutenu_normes_isolation==T - Des normes plus strictes sur l'isolation pour les nouveaux bâtiments - Réponse correcte à si cette politique est soutenue par une majorité de Français (obligation_renovation/normes_isolation/bonus_malus/limitation_110)"
label(s$nb_correct_soutenu) <- "nb_correct_soutenu: Nombre de réponses correctes à si cette politique est soutenue par une majorité de Français (obligation_renovation/normes_isolation/bonus_malus/limitation_110)"
s$correct_devoile_obligation_renovation <- s$CCC_devoile_obligation_renovation > 0 # https://www.lemonde.fr/climat/article/2020/04/11/climat-les-50-propositions-de-la-convention-citoyenne-pour-porter-l-espoir-d-un-nouveau-modele-de-societe_6036293_1652612.html
s$correct_devoile_limitation_110 <- s$CCC_devoile_limitation_110 < 0
s$correct_devoile_fonds_mondial <- s$CCC_devoile_fonds_mondial < 0
s$correct_devoile_taxe_viande <- s$CCC_devoile_taxe_viande < 0
s$nb_correct_devoile <- s$correct_devoile_obligation_renovation + s$correct_devoile_limitation_110 + s$correct_devoile_fonds_mondial + s$correct_devoile_taxe_viande
label(s$correct_devoile_obligation_renovation) <- "correct_devoile_obligation_renovation: CCC_devoile_obligation_renovation > 0 - [Si pas Aucun à sait_CCC_devoilee] L'obligation de rénovation thermique des logements les moins bien isolés assortie d'aides de l'État - Réponse correcte à si cette mesure de la CCC a été dévoilée ~ info_CCC"
label(s$correct_devoile_limitation_110) <- "correct_devoile_limitation_110: CCC_devoile_limitation_110 < 0 - [Si pas Aucun à sait_CCC_devoilee] L'abaissement de la limitation de vitesse sur les autoroutes à 110 km/h - Réponse correcte à si cette mesure de la CCC a été dévoilée ~ info_CCC"
label(s$correct_devoile_fonds_mondial) <- "correct_devoile_fonds_mondial: CCC_devoile_fonds_mondial < 0 - [Si pas Aucun à sait_CCC_devoilee] Une contribution à un fonds mondial pour le climat - Réponse correcte à si cette mesure de la CCC a été dévoilée ~ info_CCC"
label(s$correct_devoile_taxe_viande) <- "correct_devoile_taxe_viande: CCC_devoile_taxe_viande < 0 - [Si pas Aucun à sait_CCC_devoilee] Une taxe sur la viande rouge - Réponse correcte à si cette mesure de la CCC a été dévoilée ~ info_CCC"
label(s$nb_correct_devoile) <- "nb_correct_devoile: Nombre de réponses correctes à si cette mesure de la CCC a été dévoilée (obligation_renovation=T/limitation_110=F/taxe_viande=F/fonds_mondial=F)"
obstacles <<- c("lobbies", "manque_volonte", "manque_cooperation", "inegalites", "incertitudes", "demographie", "technologies", "rien")
variables_obstacles <<- paste("obstacles", obstacles, sep="_")
for (i in 1:8)  {
for (v in obstacles) s[[paste("obstacle", i, sep="_")]][s[[paste("obstacles", v, sep="_")]]==i] <- v
label(s[[paste("obstacle", i, sep="_")]]) <- paste("obstacle_", i, ": Obstacle à la lutte contre le CC classé en position ", i, " (1: le plus - 7: le moins important) (", paste(obstacles, collapse = "/"), ")", sep="") }
# TODO!: connaissance_CCC
# TODO: questionnaire preferences-pol.fr
s$Connaissance_CCC <- NA
s$connaissance_CCC_bon_francais <- s$connaissance_CCC_sortition <- s$connaissance_CCC_mesures <- s$connaissance_CCC_temporalite <- s$connaissance_CCC_internet <- s$connaissance_CCC == "FALSE"
s$connaissance_CCC_150 <- s$connaissance_CCC == "FALSE"
s$Connaissance_CCC[c(1,3,10,13,17,19,29,30,34,45,49,51,54,57,64,68,74,77,78,86,93,97,103,121,129,136,139,151,153,155,156,159,162,163,164,174,179,181,182,183,184,187,191,194,196,197,201)] <- "aucune" #
s$Connaissance_CCC[c(208,210,217,218,223,232,236,242,250,255,259,260,266,268,271,272,278,282,285,289,291,297,298,301,310,312,313,324,327,328,349,352,355,357,361,372)] <- "aucune" #
s$Connaissance_CCC[c(383,385,389,390,394,402,410,411,415,416,417,419,421,422,424,425,429,431,442,444,446,450,451,457,458,461,463,465,466,468,469,472,476,485,487,488,492)] <- "aucune" # ex: "nsp" 19, 402, # doublons 450-451, 421-422, 468-469, 515-516?
s$Connaissance_CCC[c(6,22,25,66,72,80,90,100,107,110,111,152,166,170,177,188,214,227,238,276,281,316,319,320,323,339,360,387,393,396,399,408,432,452,454,474,498,503)] <- "hors sujet" # ex: 25, 71, 90, 107 # 25-110-432 doublon ?
s$Connaissance_CCC[c(8,15,18,20,26,27,28,43,65,75,84,85,89,101,123,132,135,140,142,144,145,147,165,168,172,176,207,220,222,240,247,275,288,303,308,341,347,348,351,356,364,377,473,493)] <- "approximatif"
s$Connaissance_CCC[c(7,24,62,67,71,84,91,106,117,127,130,131,134,150,154,158,173,175,186,202,209,226,246,247,253,262,284,302,307,334,337,380,386,391,400,407,418,420,428,440,448,449,470,481)] <- "bonne" # ex: 24, 117, 334 ; contient généralement mesures, sortition, 150 ou date
s$connaissance_CCC_bon_francais[c(6,15,18,20,24,27,62,84,85,91,130,134,140,145,154,158,165,170,175,193,202,207,220,226,242,247,248,253,262,288,347,348,351,356,360,364,377,380,386,387,391)] <- "bon français" # ex: ; pas de faute d'orthographe, grammaire correcte, phrase élaborée (i.e. pas juste "je ne sais pas")
s$connaissance_CCC_sortition[c(7,62,67,71,91,106,127,130,131,134,150,154,158,165,173,175,186,202,207,209,239,246,247,253,262,284,302,308,334,348,380,407,420,428,440,448,449,470,481)] <- "sortition"
s$Connaissance_CCC[c(496,502,515,516,520,526,532,533,534,535,537,540,541,546,548,550,551,552,553,555,557,560,561,562,564,567,568,572)] <- "aucune" #
s$Connaissance_CCC[c(510,570)] <- "hors sujet" # ex: 25, 71, 90, 107, 570 # 25-110-432 doublon ?
s$Connaissance_CCC[c(9,31,33,35,37,38,55,59,81,101,120,193,202,233,235,237,249,252,273,293,294,311,358,359,363,367,374,414,434,455,457,460,479,482,484,490,508,519,522,524,538)] <- "trop vague" # ex: 374, 457, 490 [490 = 2.0?]
s$Connaissance_CCC[c(401,404,423,427,505,506,507,530,531)] <- "approximatif"
s$Connaissance_CCC[c(494,501,514,542,547,558,563,566)] <- "bonne" # ex: 24, 117, 334 ; contient généralement mesures, sortition, 150 ou date
s$Connaissance_CCC[c(73,118,143,239,248,270,280,283,326,381,388,471,489,491,504)] <- "faux" # ex: 239, 326
s$connaissance_CCC_internet[c(44,70,239,279,512)] <- "internet"
s$connaissance_CCC_sortition[c(494,501,514,530,542,547,558,566)] <- "sortition"
s$connaissance_CCC_mesures[c(7,62,67,71,130,135,142,154,175,186,202,226,246,262,302,307,337,356,386,400,404,407,428,448,449,481,494,505,531,558,563,566)] <- "mesures"
s$connaissance_CCC_temporalite[c(84,117,131,150,172,235,249,293,302,427,501)] <- "temporalité"
s$connaissance_CCC_bon_francais[c(399,404,418,419,423,425,434,448,449,454,457,460,470,471,473,481,488,493,501,507,508,522,542,562)] <- "bon français" # ex: ; pas de faute d'orthographe, grammaire correcte, phrase élaborée (i.e. pas juste "je ne sais pas")
s$connaissance_CCC_150[which(c(grepl('150', s$connaissance_CCC)),470)] <- "150"
variables_connaissance_CCC <<- c("bon_francais", "sortition", "mesures", "temporalite", "internet", "150")
for (v in variables_connaissance_CCC) s[[paste("connaissance_CCC", v, sep="_")]] <- s[[paste("connaissance_CCC", v, sep="_")]]!="FALSE"
temp <- -2*(s$Connaissance_CCC=="hors sujet") -1*(s$Connaissance_CCC=="faux") + 1*(s$Connaissance_CCC=="trop vague") + 2*(s$Connaissance_CCC=="approximatif") + 3*(s$Connaissance_CCC=="bonne")
temp[s$connaissance_CCC_internet==T] <- 2
s$Connaissance_CCC <- as.item(temp, labels = structure(c(-2:3), names=c("hors sujet", "faux", "aucune", "trop vague", "approximatif", "bonne")),
annotation="Connaissance_CCC: connaissance_CCC recodé en hors sujet/faux/aucune/approximatif/bonne (incl. internet) - Décrivez ce que vous savez de la Convention Citoyenne pour le Climat. (champ libre)")
label(s$connaissance_CCC_bon_francais) <- "connaissance_CCC_bon_francais: Indicatrice que la réponse à connaissance_CCC est constituée d'une phrase grammaticalement correcte et sans faute d'orthographe (à l'exception des phrases très courtes type 'Je ne sais pas')"
label(s$connaissance_CCC_sortition) <- "connaissance_CCC_sortition: Indicatrice que la réponse à connaissance_CCC mentionne le tirage au sort, ou du moins le caractère 'lambda' ou hétérogène des citoyens de la CCC"
label(s$connaissance_CCC_mesures) <- "connaissance_CCC_mesures: Indicatrice que la réponse à connaissance_CCC mentionne le fait que la CCC rend des propositions de mesures"
label(s$connaissance_CCC_temporalite) <- "connaissance_CCC_temporalite: Indicatrice que la réponse à connaissance_CCC mentionne un élément de la temporalité de la CCC (date de début ou de fin, ou fréquence de ses réunions)"
label(s$connaissance_CCC_internet) <- "connaissance_CCC_internet: Indicatrice que la réponse à connaissance_CCC a été copiée à partir des résultats d'une requête internet"
label(s$connaissance_CCC_150) <- "connaissance_CCC_150: Indicatrice que la réponse à connaissance_CCC mentionne le nombre de membres de la CCC (150)" # autre indicatrice qui aurait pu être intéressante : si ça mentionne que la CCC est française ou, au contraire, se méprend en parlant d'une initiative internationale
# TODO!: connaissance_CCC >572 = "/"
s <- s[, -c(9:17, 39:49, 131, 132, 134, 136, 137, 139)]
return(s)
}
s <- prepare_s()
export_stats_desc(s, paste(getwd(), 'externe_stats_desc.csv', sep='/'))
